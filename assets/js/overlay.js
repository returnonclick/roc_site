"undefined"==typeof lpTag.taglets&&(lpTag.taglets={}),lpTag.taglets.lightbox=function(){function a(a){for(var b in a)j[b]=a[b];if(lpTag.taglets.utils.isIE()&&lpTag.taglets.utils.isQuirksMode()){var c=lpTag.taglets.utils.getPageDimensions();j.position="absolute",j.height=c.totalHeight,j.width="103%"}}function b(){var a={css:j},b=lpTag.taglets.lpJsonToDom.convert({containers:a})[0];return b.className=b.className+" LPMlightbox",lpTag.taglets.utils.appendToPage(b),b.id}function c(){var a=lpTag.taglets.utils.geObjById(i);if("undefined"!=typeof a&&null!=a)try{a.parentNode.removeChild(a)}catch(b){a.style.display="none"}}function d(){var a=lpTag.taglets.utils.geObjById(i),b={name:"opacity",targetVal:.7};lpTag.taglets.lpAnimate.animate(a,b,{easing:"easeOutQuart",duration:1e3})}function e(a){var b=lpTag.taglets.utils.geObjById(i),c={name:"opacity",targetVal:0};lpTag.taglets.lpAnimate.animate(b,c,{easing:"easeOutQuart",duration:1e3,callback:a})}function a(){i=b(),d()}function f(){e(function(){c()})}var g="1.3",h="lightbox",i="",j={backgroundColor:"#000000",backgroundImage:"",opacity:0,filter:"alpha(opacity=0)",position:"fixed",top:0,left:0,bottom:0,right:0,zIndex:107108};return{_V:g,name:h,init:function(){},show:a,remove:f}},lpTag.taglets=lpTag.taglets||{},function(){function a(a,b){this.start(a,b)}function b(){function b(a,b,c,d,e){var g={top:{top:0,bottom:"auto",marginTop:"auto"},middle:{top:"50%",bottom:-1,marginTop:-parseInt(d/2)},bottom:{top:"auto",bottom:0,marginTop:"auto"},custom:{top:parseInt(b.top),bottom:"auto",marginTop:"auto"}},h={left:{left:0,right:"auto",marginLeft:"auto"},center:{left:"50%",right:"auto",marginLeft:-parseInt(e/2)},right:{left:"auto",right:0,marginLeft:"auto"},custom:{left:parseInt(b.left),right:"auto",marginLeft:"auto"}};a.position="fixed",f.extendObj(a,g[c.vertical]),f.extendObj(a,h[c.horizontal])}var c=a,d="prototype",e={CLOSED:"OFFER_CLOSED"},f=lpTag.taglets.utils,g=1;"undefined"!=typeof lpTag.taglets.baseUIOffer&&c[d].extended!==!0&&(c[d]=lpTag.taglets.baseUIOffer.createInstance(),c[d].extended=!0,c[d].constructor=c,c[d].start=function(a,b){this.init(a,b),this.setParentContainer(),this.setConfig(b),this.attachLPTagEvents(),this.run()},c[d].setParentContainer=function(){this.debugLog("in setParentContainer.."),this.parentContainer=null,-1!==this.engData.zoneId&&(lpTag.taglets.scraper?this.parentContainer=lpTag.taglets.scraper.getElmId(this.engData.zoneId)||null:this.parentContainer=document.getElementById(this.engData.zoneId))},c[d].setConfig=function(a){this.setEngagementConf(a),this.conf.useLightBox=a.effects&&a.effects.useLightBox},c[d].attachLPTagEvents=function(){var a=this.bind(e.CLOSED,this.close);this.eventIds.push(a)},c[d].close=function(a){a.entityId==this.offerId&&(this.offerClose(),f.stopEventBubble(a.htmlEvent))},c[d].createOffer=function(){this.debugLog("in createOffer..");var a=this.getOfferContainer();a&&this.appendToPage(this.setupOffer,a.containerDom,a.parentDom)},c[d].setupOffer=function(a){this.containerId=a,this.setOfferContent(),this.attachEvents(),this.showOffer()},c[d].getOfferContainer=function(){this.debugLog("in getOfferContainer..");var a={},b=this.getContainerDom();return"undefined"==typeof b?(this.errorLog("Error creating offer container"),a=null):(a.parentDom=this.parentContainer?document.getElementById(this.parentContainer):null,a.containerDom=b),a},c[d].getContainerDom=function(){var a={css:this.getContainerCss()};return a.engagementType="LPM"+this.getEngagementTypeName(this.conf.type),this.convertJsonToDom({containers:a})[0]},c[d].setOfferContent=function(){this.debugLog("in setOfferContent.."),this.appendJson(document.getElementById(this.containerId),this.activeState.elements)},c[d].getContainerCss=function(){this.debugLog("in getContainerConf..");var a=this.extractCssProps(this.activeState,["background","border"]);if(a.display="none",null!==this.parentContainer)a.position="relative",a.top=0,a.left=0;else{a.zIndex=this.conf.zIndex;var c=parseInt(this.activeState.size.height)+2*this.activeState.border.width,d=parseInt(this.activeState.size.width)+2*this.activeState.border.width;b(a,this.conf.position,this.location,c,d)}return a},c[d].attachEvents=function(){this.debugLog("in attachEvents.."),this.setClickEvent(this.getObj(this.containerId),this.offerClick,this)},c[d].showOffer=function(){this.debugLog("in showOffer.."),this.conf.useLightBox&&(this.lightbox=new lpTag.taglets.lightbox,this.lightbox.show({zIndex:this.conf.zIndex-1})),this.show(),this.onImpression(),this.setTimeout(this.offerTimeout)},c[d].cleanupOffer=function(a){this.debugLog("in cleanupOffer.."),f.clearTimeout(this.offerTimeoutId),this.conf.useLightBox&&this.lightbox.remove(),this.remove(a)},c[d].offerClick=function(){this.onClick(),this.engData.engagementType===g&&this.cleanupOffer()},c[d].offerClose=function(a){var a=a||{};a.silent||this.onClose(this.offerId),this.cleanupOffer(a)},c[d].offerTimeout=function(){this.onTimeout(this.offerId),this.cleanupOffer()})}lpTag.taglets.overlay=function(){function c(){}function d(c,d){b(),new a(c,d)}var e="0.1",f="overlay";return{v:e,name:f,init:c,createInstance:d}}()}();