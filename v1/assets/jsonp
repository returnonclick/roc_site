lpTag.callback({"serviceMap":[{"service":"leIntegration","baseURI":"va.octopus.liveperson.net"},{"service":"connectionPanel","baseURI":"va.knowledge.liveperson.net"},{"service":"agent","baseURI":"server.iad.liveperson.net"},{"service":"engHistDomain","baseURI":"va.enghist.liveperson.net"},{"service":"staticContent","baseURI":"va.content.lpsnmedia.net"},{"service":"accountConfigReadOnly","baseURI":"z1.acr.liveperson.net"},{"service":"agentVep","baseURI":"va.batchelor.liveperson.net"},{"service":"adminArea","baseURI":"server.iad.liveperson.net"},{"service":"leDataReporting","baseURI":"va.data.liveperson.net"},{"service":"leBiMstr","baseURI":"z1.bi.liveperson.net"},{"service":"tokenizer","baseURI":"tokenizer.liveperson.net"},{"service":"loggos","baseURI":"z1.loggos.liveperson.net"},{"service":"conversationVep","baseURI":"va.batchelor.liveperson.net"},{"service":"pusherInt","baseURI":"va.pushsrv.int.liveperson.net"},{"service":"nlp","baseURI":"va.nlp.liveperson.net"},{"service":"mobileVisit","baseURI":"dispatch.look.io"},{"service":"asyncMessagingEnt","baseURI":"va.msg.liveperson.net"},{"service":"liveEngage","baseURI":"z1.le.liveperson.net"},{"service":"acCdnDomain","baseURI":"accdn.lpsnmedia.net"},{"service":"openPlatform","baseURI":"server.iad.liveperson.net"},{"service":"batchelor","baseURI":"va.batchelor.liveperson.net"},{"service":"mobileChat","baseURI":"dispatch.look.io"},{"service":"lpEng","baseURI":"z1.lpEng.liveperson.net"},{"service":"visitorFeed","baseURI":"va.v-feed.liveperson.net"},{"service":"predictiveDialer","baseURI":"z1.pd.liveperson.net"},{"service":"mTag","baseURI":"server.iad.liveperson.net"},{"service":"leBilling","baseURI":"va.le-billing.liveperson.net"},{"service":"keyService","baseURI":"keyservice.liveperson.net"},{"service":"etool","baseURI":"z1.etool.liveperson.net"},{"service":"visitManager","baseURI":"va.vm.liveperson.net"},{"service":"leCdnDomain","baseURI":"lpcdn.lpsnmedia.net"},{"service":"redirect","baseURI":"z1.liveper.sn"},{"service":"smt","baseURI":"va.v.liveperson.net"},{"service":"liveEngageUI","baseURI":"va.le1.liveperson.net"},{"service":"interactionPlatform","baseURI":"va.i.liveperson.net"},{"service":"coBrowse","baseURI":"va.cobrowse.liveperson.net"},{"service":"pusher","baseURI":"va.push.liveperson.net"},{"service":"liveEngageVep","baseURI":"va.batchelor.liveperson.net"},{"service":"accountConfigReadWrite","baseURI":"va.ac.liveperson.net"},{"service":"asyncMessaging","baseURI":"va.ams.liveperson.net"},{"service":"ALL","baseURI":"server.iad.liveperson.net"}],"taglets":[{"code":"window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.BrowserStateManager=function(e){function t(e){x=\"boolean\"==typeof navigator.onLine;v=x?navigator.onLine:!0;I=e;z=r();S=window.innerWidth;A=u();var t=h();y=t.hiddenAttr;k=t.visibilityChange;s()}function i(e,t,i){L[e]=L[e]||[];L[e].push({callback:t,context:i})}function n(e,t){w(e,t)}function l(){x&&(v=navigator.onLine);return v}function a(){return!!y}function p(){return D}function o(){return document[y]}function r(){var e;if(\"undefined\"!=typeof window.orientation){var t=window.orientation;e=90===t||-90===t}else e=window.innerWidth>window.screen.availHeight;return e}function d(){for(var e in L){L[e]&&L[e].constructor===Array&&(L[e].length=0);L[e]=null;delete L[e]}A&&W.unregisterEvent(window,A,g);W.unregisterEvent(window,\"resize\",C);W.unregisterEvent(window,\"focus\",_);W.unregisterEvent(window,\"blur\",c)}function s(){A&&W.registerEvent(window,A,g);W.registerEvent(window,\"resize\",C);W.registerEvent(window,\"focus\",_);W.registerEvent(window,\"blur\",c);W.registerEvent(document,k,m)}function _(){D=!0;if(\"undefined\"!=typeof L[O.FOCUS_CHANGE])for(var e=0;e<L[O.FOCUS_CHANGE].length;e++)W.runCallback(L[O.FOCUS_CHANGE][e].callback,L[O.FOCUS_CHANGE][e].context,{focus:D});N.info(\"_onFocus: trigger window focus event\",R)}function m(){if(\"undefined\"!=typeof L[O.VISIBILITY_CHANGE])for(var e=0;e<L[O.VISIBILITY_CHANGE].length;e++)W.runCallback(L[O.VISIBILITY_CHANGE][e].callback,L[O.VISIBILITY_CHANGE][e].context,{visible:!document[y]});N.info(\"_onVisibilityChange: trigger visibility change event\",R)}function c(){D=!1;if(\"undefined\"!=typeof L[O.FOCUS_CHANGE])for(var e=0;e<L[O.FOCUS_CHANGE].length;e++)W.runCallback(L[O.FOCUS_CHANGE][e].callback,L[O.FOCUS_CHANGE][e].context,{focus:D});N.info(\"_onBlur: trigger window blur event\",R)}function h(){var e,t;if(\"undefined\"!=typeof document.webkitHidden){e=\"webkitHidden\";t=\"webkitvisibilitychange\"}else if(\"undefined\"!=typeof document.mozHidden){e=\"mozHidden\";t=\"mozvisibilitychange\"}else if(\"undefined\"!=typeof document.msHidden){e=\"msHidden\";t=\"msvisibilitychange\"}else if(\"undefined\"!=typeof document.hidden){e=\"hidden\";t=\"visibilitychange\"}return{hiddenAttr:e,visibilityChange:t}}function u(){return I.isAndroid()||I.isIOS()?\"orientationchange\":\"resize\"}function g(){E&&clearTimeout(E);var e=300;I.isAndroid()&&(e=S===window.innerWidth?900:400);E=setTimeout(f,e)}function f(){var e,t,i;e=r();t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0;i=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0;if(e!==z&&\"undefined\"!=typeof L[O.ORIENTATION_CHANGE]){for(var n=0;n<L[O.ORIENTATION_CHANGE].length;n++){W.runCallback(L[O.ORIENTATION_CHANGE][n].callback,L[O.ORIENTATION_CHANGE][n].context,{landscape:e,height:i,width:t});z=e}N.info(\"_triggerOrientationChange: trigger orientation changed event. landscape: \"+z,R)}S=window.innerWidth}function C(){T?clearTimeout(T):b();T=setTimeout(function(){var e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0,t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0,i={height:t,width:e};if(\"undefined\"!=typeof L[O.RESIZE])for(var n=0;n<L[O.RESIZE].length;n++)W.runCallback(L[O.RESIZE][n].callback,L[O.RESIZE][n].context,i);T=null},300)}function b(){if(\"undefined\"!=typeof L[O.RESIZE_START])for(var e=0;e<L[O.RESIZE_START].length;e++)W.runCallback(L[O.RESIZE_START][e].callback,L[O.RESIZE_START][e].context)}function w(e,t){var i=L[e];if(i){for(var n=[],l=0;l<i.length;l++)i[l].callback!==t&&n.push(i[l]);i.length=0;L[e]=n}}var x,v,S,z,y,k,T,E,I,A,N=lpTag.unifiedWindow.log,R=\"BrowserStateManager\",O={RESIZE_START:\"resizeStart\",ORIENTATION_CHANGE:\"orientationChange\",RESIZE:\"resize\",FOCUS_CHANGE:\"focusChange\",VISIBILITY_CHANGE:\"visibilityChange\"},L={},D=!0,W=lpTag.taglets.lpUtil;t(e);return{EVENT_NAME:O,on:i,off:n,visibilitySupported:a,isConnected:l,isHidden:o,isFocus:p,isLandscape:r,dispose:d}};window.lpTag=window.lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.DeviceDetector=function(){function e(){return V===P.familyEnum.desktop}function t(){return V===P.familyEnum.mobile}function i(){return V===P.familyEnum.tablet}function n(){return H===P.osEnum.iOS}function l(){return H===P.osEnum.android}function a(){return l()&&!U.match(/Chrome/)}function p(){return G}function o(){return A}function r(){return N}function d(){return O}function s(){if(\"boolean\"==typeof L)return L;var e=!0;try{new Audio}catch(t){e=!1}return e}function _(){return R}function m(){return F}function c(){return B}function h(){return n()?F[1]<=\"7\"||!1:void 0}function u(){return n()?F[1]<=\"6\"||!1:void 0}function g(){return n()?\"8\"===F[1]||!1:void 0}function f(){return H===P.osEnum.windows}function C(){return H===P.osEnum.mac}function b(){return\"Microsoft Internet Explorer\"===j||w()}function w(){return U.match(/Trident.*rv[ :]*11\\./)}function x(){return P.familyName()}function v(){var e=document.createElement(\"DIV\");k(e);T(e);e=null}function S(){var e;l()?e=U.match(/Android (\\d+)\\.(\\d+)(?:\\.(\\d+))?;+/i):n()&&(e=U.match(/OS (\\d+)_(\\d+)(?:_(\\d+))?\\s+/i));return e}function z(){var e;if(b())if(w())e=11;else{var t=new RegExp(\"MSIE ([0-9]{1,}[.0-9]{0,})\");try{null!=t.exec(U)&&(e=parseFloat(RegExp.$1))}catch(i){W.error(\"_detectBrowserVersion: Could not detect IE version\",D)}}return e}function y(){var e=document.getElementsByName(\"viewport\");if(e.length>0)for(var t=0;t<e.length;t++){var i=I(e[t].content);if(\"device-width\"===i.width)return!0}return!1}function k(e){N=E(e,\"AnimationName\");N.supported&&(A=!0)}function T(e){R=E(e,\"Transition\");R.supported&&(O=!0)}function E(e,t){var i,n={Webkit:\"-webkit-\",Moz:\"-moz-\",O:\"-o-\",ms:\"-ms-\",Khtml:\"-khtml-\"},l=!1,a=t?t.substring(0,1).toLowerCase()+t.substr(1):\"\",p=a,o=t;if(a&&\"undefined\"!=typeof e.style[a]){l=!0;i=\"\"}if(!l)for(var r in n)if(t&&n.hasOwnProperty(r)&&\"undefined\"!=typeof e.style[r+t]){i=n[r];p=i+a;o=r+t;l=!0;break}return{supported:l,preFix:l?i:\"\",propertyName:l?o:\"\",cssPropertyName:l?p:\"\"}}function I(e){for(var t,i=e.split(\",\"),n={},l=0;l<i.length;l++){t=i[l].split(\"=\");n[M.trimAndLower(t[0])]=M.trimAndLower(t[1])}return n}var A,N,R,O,L,D=\"DeviceDetector\",W=lpTag.unifiedWindow.log,M=lpTag.taglets.lpUtil,P=lpTag.device,U=navigator.userAgent,j=navigator.appName,H=P.os(),V=P.family(),F=S(),B=z(),G=y();v();return{isDesktop:e,isMobile:t,isTablet:i,isMobileOptimized:p,isAnimationSupported:o,getAnimationData:r,isTransitionSupported:d,isAudioSupported:s,getTransitionData:_,isAndroid:l,isNativeAndroid:a,isIOS:n,isWindows:f,isMacOS:C,getDeviceFamilyName:x,osVersion:m,browserVersion:c,isIOS6:u,isIOS7:h,isIOS8:g,isIE:b}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.Events=function(e){function t(e){n=new lpTag.Events(e);l=n.trigger;n.trigger=i}function i(e,t,i){l(e,t,i);if(lpTag.events&&\"object\"==typeof e&&e.global){e.passDataByRef=!1;e.aSync=!0;lpTag.events.trigger(e)}}var n,l;t(e);return n};!function(){function e(){function e(e){return l[e]||lpTag.unifiedWindow.defaultDictionary[e]}function t(e){return a[e]===!0}function i(){l={}}function n(e,t){t=t||{};var i=t.isDefault?lpTag.unifiedWindow.defaultDictionary:l;lpTag.taglets.lpUtil.cloneExtend(e,i)}var l={},a={\"he-IL\":!0,\"ar-AE\":!0};return{getString:e,isRTL:t,clear:i,add:n}}lpTag.unifiedWindow.language=new e;lpTag.unifiedWindow.addLanguage=function(e,t){lpTag.unifiedWindow.language.add(e,t)}}();window.lpTag=window.lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.log=lpTag.unifiedWindow.log||function(){function e(e){r=lpTag.taglets.lpUtil;var i=r.getURLParams(window.location.search),n=i.lpLog;if(e.debug||\"1\"===n){p(\"INFO\");t()}}function t(){window.lpTaglogListeners=window.lpTaglogListeners||[];window.lpTaglogListeners.push(function(e,t,n){window.console&&t&&s[t]<=m&&-1===r.indexOf(_,n)&&console.log(i()+\" \"+n+\" : \"+e+\" LEVEL: \"+t)})}function i(){var e=new Date;return e.getHours()+\":\"+(e.getMinutes()<10?\"0\"+e.getMinutes():e.getMinutes())+\":\"+(e.getSeconds()<10?\"0\"+e.getSeconds():e.getSeconds())}function n(e,t){o(e,\"ERROR\",t||d)}function l(e,t){o(e,\"INFO\",t||d)}function a(e,t){o(e,\"DEBUG\",t||d)}function p(e){s[e]&&(m=s[e])}function o(e,t,i){window.lpTag&&lpTag.log&&e&&lpTag.log(e,t,i||d)}var r,d=\"UnifiedWindowLogger\",s={ERROR:1,INFO:2,DEBUG:3},_=[\"lp_SMT\",\"lp_monitoringSDK\",\"LP_OFFER\"],m=s.ERROR;return{init:e,error:n,info:l,debug:a,setLogLevel:p,logLevels:s}}();window.lpTag=window.lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.ResourceLoader=function(){function e(){n={}}function t(e){for(var t in e)n[t]=e[t]}function i(e){return\"undefined\"!=typeof n[e]?n[e]:void 0}var n={};return{load:t,clear:e,getResource:i}}();window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.SessionManager=function(e){function t(e){if(\"object\"==typeof e&&e.accountId&&\"string\"==typeof e.accountId){f+=e.accountId;m=e.sessionId;_=e.events;c=e.external;s=e.cookieRefreshTimeout||5e3}else g.error(\"init: no conf was provided\",h)}function i(){g.info(\"getSessionId  - before = \"+m,h);var e,t=u.cookieActions.get(f);g.info(\"_getCookieValue sessionCookie = \"+t,h);t&&(e=t[1]);!m&&t&&(m=t[0]);m=o(m,e);g.info(\"getSessionId  - result = \"+m,h);return m}function n(){g.info(\"getSessionTime\",h);var e=u.cookieActions.get(f);g.debug(\"getSessionTime: cookie=\"+JSON.stringify(e));return e?e[1]:void 0}function l(){g.info(\"getSessionCookie\",h);return u.cookieActions.get(f)}function a(){if(!c){g.info(\"refresh\",h);b=!1;i();r()}}function p(e){g.info(\"dispose\",h);m=null;b=!0;e===!0||c||u.cookieActions.remove(f,C)}function o(e,t,i){g.info(\"_setSession sessionId=\"+e+\" timestamp=\"+t,h);var n=u.cookieActions.get(f);if(!e||\"null\"===e&&!i){e=u.getUID();g.info(\"_setSession getUID sid=\"+e,h)}else if(e&&n&&e!==n[0]&&i){_.trigger({appName:h,eventName:\"sessionChanged\",data:n[0]});b=!0;return}var l=[e];t&&l.push(t);g.info(\"_setSession setCookie = \"+f+\" cookieValue = \"+l,h);c||u.cookieActions.set(f,l,C);return e}function r(){g.info(\"_refreshCookie : disposed = \"+b,h);d&&clearTimeout(d);if(!b){var e=(new Date).getTime();g.info(\"Refresh Cookie: timestamp = \"+e,h);o(m,e,!0);d=setTimeout(r,s)}}var d,s,_,m,c,h=\"SessionManager\",u=lpTag.taglets.lpUtil,g=lpTag.unifiedWindow.log,f=\"LPCKEY-\",C=lpTag.domainUtil.getParentDomain(window.location.host),b=!1;t(e);return{dispose:p,refresh:a,getSessionId:i,getSessionTime:n,getSessionCookie:l}};window.lpTag=window.lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.StateAnalyzer=function(e,t){function i(e){if(\"object\"==typeof e&&t&&e.sessionId&&e.accountId&&e.secureStorageLocation){o=t;r=e.sessionId;d=e.accountId;s=e.secureStorageLocation;_=e.sessionTimeout||3e4}else h.error(\"init: no conf was provided\",m)}function n(e,t){h.info(\"getState\",m);lpTag.taglets.lpSecureStorage.getValue({key:r,site:d,success:a(e),error:p(t),appName:c,domain:s})}function l(){h.info(\"isInSession\",m);var e=o.getSessionTime(),t=(new Date).getTime();return e&&_>=t-e}function a(e){return function(t){var i=l();h.info(\"_success: data = \"+JSON.stringify(t)+\" isInSession=\"+i,m);t?u.runCallback(e,null,t,g.IN_SESSION):i?u.runCallback(e,null,t,g.INVALID):u.runCallback(e,null,t,g.NOT_STARTED)}}function p(e){return function(t){h.info(\"_error: data = \"+JSON.stringify(t),m);u.runCallback(e,null,t,g.NOT_STARTED)}}var o,r,d,s,_,m=\"StateAnalyzer\",c=\"UIState\",h=lpTag.unifiedWindow.log,u=lpTag.taglets.lpUtil,g={NOT_STARTED:0,IN_SESSION:1,INVALID:2,ENDED:3};i(e);return{getState:n,state:g,isInSession:l}};window.lpTag=window.lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.taglets.lpUtil=lpTag.taglets.lpUtil||function(){function indexOf(e,t){if(supportIndexOf&&\"function\"==typeof e.indexOf)return e.indexOf(t);if(e.constructor===Array)for(var i=0;i<e.length;i++)if(e[i]===t)return i;return-1}function trim(e){return\"string\"!=typeof e?e:e.trim?e.trim():e.replace(/^\\s+|\\s+$/gm,\"\")}function trimAndLower(e){if(\"string\"!=typeof e)return e;var t=trim(e);return t.toLowerCase()}function getURLParams(e){var t,i,n={};t=e.substr(1).split(\"&\");for(var l=0;l<t.length;l++)if(t[l].indexOf(\"=\")>-0){i=t[l].split(\"=\");2==i.length&&(n[decodeURIComponent(i[0])]=decodeURIComponent(i[1]))}return n}function cloneExtend(e,t,i){var n;if(!e||\"object\"!=typeof e)return e;if(!t)try{return JSON.parse(stringify(e))}catch(l){lpTag.log(\"unable to clone object:\"+JSON.stringify(l),\"ERROR\",name);return}n=t||e.constructor()||{};for(var a in e)n[a]!==e[a]&&e.hasOwnProperty(a)&&(n[a]=i?cloneExtend(e[a],void 0,i):e[a]);return n}function convertConfig(conf,_config){if(\"undefined\"!=typeof _config){if(conf)for(var i=0;i<conf.length;i++){var val=conf[i].value;if(\"string\"==typeof val&&\"\"!==val)if(\"true\"===val)val=!0;else if(\"false\"===val)val=!1;else if(\"[\"==val.charAt(0)||\"{\"==val.charAt(0))try{val=\"undefined\"!=typeof JSON&&JSON.parse?JSON.parse(val):eval(\"(\"+val+\")\")}catch(e){lpTag.log(\"unable to parse JSON:\"+JSON.stringify(e),\"ERROR\",name)}_config[conf[i].id]=val}}else lpTag.log(\"_config is passed as undefined\",\"ERROR\",name)}function addStyleTag(e,t){if(e&&\"string\"==typeof e){t=t||{};var i,n=t.document||window.document,l=t.id;if(\"undefined\"!=typeof l){i=n.getElementById(l)||n.createElement(\"style\");i.id=l}else i=n.createElement(\"style\");i.type=\"text/css\";n.getElementsByTagName(\"head\")[0].appendChild(i);i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e));return i}}function objectKeys(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[i]=i);return t}function waitForBody(e,t){function i(){l.body?runCallback(e,n):setTimeout(i,50)}t=t||{};var n=t.context,l=t.document||window.document;i()}function stringify(e){var t,i;if(\"function\"==typeof Array.prototype.toJSON){i=Array.prototype.toJSON;delete Array.prototype.toJSON;try{t=JSON.stringify(e)}catch(n){Array.prototype.toJSON=i;throw n}Array.prototype.toJSON=i}else t=JSON.stringify(e);return t}function getUID(){var e=\"tttttttt-tttt-4ttt-fttt-t7ttttttttttt\".replace(/[tf]/g,function(e){var t=16*Math.random()|0,i=\"t\"==e?t:3&t|8;return i.toString(16)});return e+\"-\"+Math.floor(1e5*Math.random())}function runCallback(e,t){t=t||window;if(\"function\"==typeof e){var i=Array.prototype.slice.call(arguments,2);try{return e.apply(t,i)}catch(n){lpTag.log(\"Failed to execute callback exc= \"+n.message,\"ERROR\",name)}}}function registerEvent(e,t,i){e&&t&&i&&(e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent(\"on\"+t,i))}function unregisterEvent(e,t,i){e&&t&&i&&(e.removeEventListener?e.removeEventListener(t,i,!1):e.detachEvent(\"on\"+t,i))}function buildClassString(e,t,i){var n,l;e=\"string\"==typeof e?e:\"\";n=e.split(\" \");l=t&&t.constructor===Array?t:\"string\"==typeof t?[t]:[];i=i&&i.constructor===Array?i:\"string\"==typeof i?[i]:[];for(var a=0;a<n.length;a++)indexOf(i,n[a])<0&&indexOf(l,n[a])<0&&l.push(n[a]);return l.join(\" \").replace(/$\\s/gi,\"\")}function isEmpty(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function addClass(e,t){if(e.className.indexOf(t)<0){e.className=[e.className,t].join(\" \");e.className=_removeSpaces(e.className)}}function removeClass(e,t){e.className=e.className.replace(new RegExp(t,\"g\"),\"\");e.className=_removeSpaces(e.className)}function _removeSpaces(e){return trim(e.replace(/\\s\\s*/g,\" \"))}var name=\"Utils\",supportIndexOf=\"function\"==typeof[].indexOf,cookieActions={delimiter:\"|\",set:function(e,t,i){if(\"string\"==typeof e&&t.join&&\"function\"==typeof t.join){var n=encodeURIComponent(e)+\"=\"+encodeURIComponent(t.join(this.delimiter))+\";path=/\";\"undefined\"!=typeof i&&(n+=\";domain=\"+i);document.cookie=n;return!0}},get:function(e){var t=\"\\\\$&\";if(\"string\"==typeof e){var i=document.cookie.replace(new RegExp(\"(?:(?:^|.*;)\\\\s*\"+encodeURIComponent(e).replace(/[\\-\\.\\+\\*]/g,t)+\"\\\\s*\\\\=\\\\s*([^;]*).*$)|^.*$\"),\"$1\")||null;if(\"string\"==typeof i){var n=decodeURIComponent(i);if(n)return n.split(this.delimiter)}}},remove:function(e,t){if(\"string\"==typeof e){this.set(e,[\"null\"],t);return!0}}};return{waitForBody:waitForBody,addStyleTag:addStyleTag,buildClassString:buildClassString,trim:trim,trimAndLower:trimAndLower,getURLParams:getURLParams,indexOf:indexOf,cloneExtend:cloneExtend,convertConfig:convertConfig,stringify:stringify,cookieActions:cookieActions,getUID:getUID,registerEvent:registerEvent,unregisterEvent:unregisterEvent,runCallback:runCallback,objectKeys:objectKeys,isEmpty:isEmpty,addClass:addClass,removeClass:removeClass}}();window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.WindowConfigurationManager=function(e){function t(e){if(\"object\"==typeof e&&e.sessionId&&e.accountId&&e.secureStorageLocation&&e.domain){s=e.sessionId;d=e.accountId;_=e.secureStorageLocation;m=e.domain;h=e.windowId;c=s+f}else C.error(\"init: no configuration given\",g)}function i(e){C.info(\"getConf\",g);u?b.runCallback(e,null,u):w.getValue({key:c,site:d,success:p(e),error:p(e),appName:f,domain:_})}function n(){w.removeValue({key:c,site:d,appName:f,success:r,error:r,domain:_})}function l(e){C.info(\"_setConf\",g);w.setValue({key:c,site:d,value:{conf:e,windowId:h},success:a,error:a,appName:f,domain:_,expires:108e5})}function a(e){C.info(\"_setCallback: data=\"+JSON.stringify(e),g)}function p(e){return function(t){if(e)if(t){u=t.conf;h=t.windowId;b.runCallback(e,null,u)}else o(e)}}function o(e){var t;C.info(\"_getConfiguration\",g);if(h){t=\"https://\"+m+\"/api/account/\"+d+\"/configuration/engagement-window/window-confs/\"+h;lpTag.taglets.jsonp.issueCall({url:t,timeout:5e3,retries:0,success:function(t){if(t&&t.json&&t.json&&!t.error){C.info(\"_getConfiguration - got configuration: \"+JSON.stringify(t.json),g);u=t.json;b.runCallback(e,null,u);l(u)}else{C.info(\"_getConfiguration - NO CONFIGURATION FOUND\",g);b.runCallback(e)}},error:function(){C.info(\"_getConfiguration - ERROR FROM SERVER\",g);b.runCallback(e)}})}else{C.error(\"_getConfiguration: No windowId provided, fallback to default configuration\",g);b.runCallback(e,null,{})}}function r(){}var d,s,_,m,c,h,u,g=\"WindowConfigurationManager\",f=\"UIConf\",C=lpTag.unifiedWindow.log,b=lpTag.taglets.lpUtil,w=lpTag.taglets.lpSecureStorage;t(e);return{getConf:i,clear:n}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.WrapperWindow=function(e,t,i){function n(e){var t;if(e&&Y.isDesktop()&&e.right>=0){t=e.right>document.body.clientWidth?document.body.clientWidth-280:e.right;ae.style.right=t+\"px\";pe.style.right=t+\"px\"}xe.debug(\"_setWindowPosition: offset=\"+e.right,ge)}function l(e){if(e){V()||n(e.position);a(e.maximized);p(e.embedded)}else a(ze.isMaximized)}function a(e){if(e){xe.debug(\"maximizing\",ge);ae.style.display=\"none\";pe.style.display=\"block\"}else{xe.debug(\"minimizing\",ge);ae.style.display=\"block\";pe.style.display=\"none\"}}function p(e){if(!e){ae.style.display=\"none\";pe.style.display=\"none\"}}function o(e){J();var t=ve[e];if(t&&t!==Q){$=t.error;f($);t.title?r(t.title):t.text&&r(t.text);E(t.text,t.imgUrl,t.imgAltText,e);Q=t}}function r(e,t){if(ee!==e){xe.info('setting title to: \"'+e+'\"',ge);var i=ie.querySelectorAll('[data-lp-point=\"headerText\"]');t=t||e;for(var n=0;n<i.length;n++){i[n].innerHTML=t;i[n].setAttribute(\"title\",e)}ee=e}}function d(){if(x()){xe.info(\"showing\",ge);ie.style.display=\"block\"}}function s(){if(x()){xe.info(\"hiding\",ge);ie.style.display=\"none\"}}function _(e,t){x()||we.waitForBody(function(){H(e);y();\"undefined\"!=typeof t&&t()})}function m(){return ie}function c(){return ae}function h(){return oe}function u(){return pe}function g(){return ne}function f(e){e?we.removeClass(me,\"lp_hidden\"):we.addClass(me,\"lp_hidden\")}function C(e){e?we.removeClass(ce,\"lp_hidden\"):we.addClass(ce,\"lp_hidden\")}function b(){xe.info(\"disposing\",ge);S();Q=null;ee=null;w(!1);ne.remove?ne.remove():document.body.removeChild(ne)}function w(e){Se=e}function x(){return Se===!0}function v(){xe.info(\"_maximize\",ge);a(!0)}function S(){xe.info(\"unbinding dom events\",ge);z();K.off(K.EVENT_NAME.ORIENTATION_CHANGE,X)}function z(){we.unregisterEvent(ae,\"click\",v);we.unregisterEvent(me,\"click\",b)}function y(){we.registerEvent(me,\"click\",b)}function k(e){J();xe.info(\"removing current message\",ge);var t=_e.querySelector('[data-lp-point=\"message\"]');if(t){t.remove?t.remove():_e.removeChild(t);e||r(\"\");N()}}function T(){return ze.iconsRepository}function E(e,t,i,n){d();A();t=t?t:\"\";i=i?i:\"\";e=e?e:\"\";k();xe.info(\"setting message to: \"+n,ge);var l='<div class=\"lp_message\" data-lp-point=\"message\"><img src=\"{{imagesRepository}}/{{imageUrl}}\"><div class=\"lp_text\">{{text}}</div></div>';l=I(l);l=l.replace(\"{{text}}\",e);l=l.replace(\"{{imageUrl}}\",t);l=l.replace(\"{{imageAltText}}\",i?'alt=\"'+i+'\"':\"\");_e.innerHTML+=l}function I(e){e=e.replace(/\\{\\{iconsRepository\\}\\}/g,T());e=e.replace(/\\{\\{imagesRepository\\}\\}/g,ze.imagesRepository);return e}function A(){N();we.addClass(_e,\"lp_centered\")}function N(){we.removeClass(_e,\"lp_centered\")}function R(e,t){if(\"object\"==typeof e)for(var i in e)ze[i]=e[i];else ze[e]=t}function O(e,t,i){Y=t;K=i;R(e)}function L(){var e=Ce.WRAPPER_DIV_CSS_CLASS_PREFIX;e+=Y.isMobile()?Ce.MOBILE_CSS_CLASS:Y.isTablet()?Ce.TABLET_CSS_CLASS:Ce.DESKTOP_CSS_CLASS;we.addClass(ne,e);return e}function D(){Y.isNativeAndroid()&&we.addClass(ne,Ce.WRAPPER_DIV_CSS_CLASS_PREFIX+Ce.NATIVE_CSS_CLASS);var e=Ce.WRAPPER_DIV_CSS_CLASS_PREFIX;if(Y.isIE())e+=\"ie\"+Y.browserVersion();else if(Y.isIOS()){e+=Ce.IOS_CSS_CLASS;Y.isIOS6()?e+=\" \"+Ce.IOS6_CSS_CLASS:Y.isIOS8()&&(e+=\" \"+Ce.WRAPPER_DIV_CSS_CLASS_PREFIX+Ce.IOS8_CSS_CLASS)}else if(Y.isAndroid())e+=Ce.ANDROID_CSS_CLASS;else{if(!Y.isMacOS())return;e+=Ce.MAC_OSX_CSS_CLASS}we.addClass(ne,e);return e}function W(){var e='<div class=\"lp_minimized\" data-lp-point=\"minimized\"><div class=\"lp_main\" data-lp-point=\"main\"><div class=\"lp_header\" data-lp-point=\"header\" data-lp-cust-id=\"top\"><div class=\"lp_notification_number lpHide\" data-lp-point=\"notification_counter\"><span class=\"lp_notification_text\" data-lp-point=\"notification_text\">{{notification_number}}</span></div><div class=\"lp_header-content-wrapper\"><div class=\"lp_title\"><div class=\"lp_chatting-with-icon lpHide\" data-lp-type=\"icon\" data-lp-point=\"chattingWithIcon\"><img src=\"{{iconsRepository}}/sprites_v1.png\"></div><span data-lp-point=\"headerText\" data-lp-cust-id=\"top_text\" class=\"lp_top-text\" data-studio-click=\"true\">{{windowTitle}}</span></div><button title=\"{{tooltip_Close}}\" class=\"lp_close\" data-lp-point=\"close\"><div class=\"lp_close-icon\" data-lp-type=\"icon\"><img src=\"{{iconsRepository}}/sprites_v1.png\" alt=\"{{tooltip_Close}}\" aria-hidden=\"true\"></div></button></div></div></div></div>';e=I(e);e=e.replace(/\\{\\{tooltip_Close\\}\\}/g,be.getString(\"tooltip_Close\"));ie.innerHTML+=e}function M(){W();P();U()}function P(){var e='<div class=\"lp_maximized\" data-lp-point=\"maximized\"><div class=\"lp_header\" data-lp-point=\"header\" data-lp-cust-id=\"top\" data-studio-click=\"true\"><div class=\"lp_header-content-wrapper\"><div class=\"lp_title\"><div class=\"lp_chatting-with-icon lpHide\" data-lp-type=\"icon\" data-lp-point=\"chattingWithIcon\"><img src=\"{{iconsRepository}}/sprites_v1.png\"></div><span data-lp-point=\"headerText\" data-lp-cust-id=\"top_text\" class=\"lp_top-text\" data-studio-click=\"true\">{{windowTitle}}</span></div><button title=\"{{tooltip_Close}}\" class=\"lp_close\" data-lp-point=\"close\"><div class=\"lp_close-icon\" data-lp-type=\"icon\"><img src=\"{{iconsRepository}}/sprites_v1.png\" alt=\"{{tooltip_Close}}\" aria-hidden=\"true\"></div></button> <button title=\"{{tooltip_Popout}}\" class=\"lp_popout lpHide\" data-lp-point=\"popout\"><div class=\"lp_pop-out-icon\" data-lp-type=\"icon\" data-lp-point=\"popicon\"><img src=\"{{iconsRepository}}/sprites_v1.png\" alt=\"{{tooltip_Popout}}\" aria-hidden=\"true\"></div></button> <button title=\"{{tooltip_Minimize}}\" class=\"lp_minimize\" data-lp-point=\"minimize\"><div class=\"lp_minimize-icon\" data-lp-type=\"icon\"><img src=\"{{iconsRepository}}/sprites_v1.png\" alt=\"{{tooltip_Minimize}}\" aria-hidden=\"true\"></div></button></div></div><div class=\"lp_main\" data-lp-point=\"main\" data-lp-cust-id=\"mainArea\"></div></div><div data-lp-point=\"buffer-strip\" class=\"lp_buffer-strip\"><div class=\"lp_buffer-strip-container\" data-lp-cust-id=\"mainArea\"></div></div>';e=I(e);e=e.replace(/\\{\\{tooltip_Close\\}\\}/g,be.getString(\"tooltip_Close\"));ie.innerHTML+=e}function U(){ae=ie.querySelector('[data-lp-point=\"minimized\"]');pe=ie.querySelector('[data-lp-point=\"maximized\"]');oe=ie.querySelector('[data-lp-point=\"buffer-strip\"]')}function j(){ie=document.createElement(\"div\");Ce.WRAPPER_DIV_ID&&(ie.id=Ce.WRAPPER_DIV_ID);ne=document.createElement(\"div\");ne.appendChild(ie);document.body.appendChild(ne)}function H(e){xe.info(\"rendering\",ge);j();M();var t=ae.querySelector('[data-lp-point=\"main\"]');if(Ce.MINIMIZED_VIEW_IFRAME_RENDERING){re=q(t);de=re.body;we.addClass(de,\"lp_main\")}else de=t;var i=pe.querySelector('[data-lp-point=\"main\"]');if(Ce.MAXIMIZED_VIEW_IFRAME_RENDERING){se=q(i);_e=se.body;we.addClass(_e,\"lp_main\")}else _e=i;me=pe.querySelector(['[data-lp-point=\"close\"]']);ce=pe.querySelector(['[data-lp-point=\"minimize\"]']);he=pe.querySelector(['[data-lp-point=\"popicon\"]']);he&&we.addClass(he,ze.poppedOut?\"lp_pop-in-icon\":\"lp_pop-out-icon\");V()&&Z();C(!1);f(!1);l(e);G();F();w(!0);B()}function V(){return ze.poppedOut||ze.external}function F(){ue=setTimeout(function(){o(te.WAIT)},Ce.WAIT_INDICATION_DELAY)}function B(){L();D();if(Y.isMobile()||Y.isTablet()){X({landscape:K.isLandscape()});K.on(K.EVENT_NAME.ORIENTATION_CHANGE,X)}}function G(){xe.info(\"applying style\",ge);le=we.addStyleTag('#lpChat *{box-sizing:border-box;font-weight:normal;text-align:left;letter-spacing:0;font-family:inherit;opacity:1;filter:alpha(opacity=100);max-width:none;direction:inherit;text-align:inherit}#lpChat *:focus{outline:0}#lpChat .lp_main_area *{-webkit-overflow-scrolling:touch;-webkit-text-size-adjust:none;outline:none;-webkit-font-smoothing:antialiased}#lpChat img{margin:0;padding:0;border:0;vertical-align:bottom;background:inherit;background:initial;position:static;position:initial;color:black;width:auto;height:auto;text-shadow:none;box-shadow:none;-webkit-box-shadow:initial;line-height:normal}#lpChat b,#lpChat strong{font-weight:bold}#lpChat h1,#lpChat h2,#lpChat h3,#lpChat h4,#lpChat h5,#lpChat h6,#lpChat p,#lpChat blockquote,#lpChat pre,#lpChat a,#lpChat abbr,#lpChat acronym,#lpChat address,#lpChat big,#lpChat cite,#lpChat code,#lpChat del,#lpChat dfn,#lpChat em,#lpChat ins,#lpChat kbd,#lpChat q,#lpChat s,#lpChat samp,#lpChat small,#lpChat strike,#lpChat strong,#lpChat sub,#lpChat sup,#lpChat tt,#lpChat var,#lpChat b,#lpChat u,#lpChat i,#lpChat center,#lpChat dl,#lpChat dt,#lpChat dd,#lpChat ol,#lpChat ul,#lpChat li,#lpChat fieldset,#lpChat form,#lpChat label,#lpChat legend,#lpChat table,#lpChat caption,#lpChat tbody,#lpChat tfoot,#lpChat thead,#lpChat tr,#lpChat th,#lpChat td,#lpChat article,#lpChat aside,#lpChat canvas,#lpChat details,#lpChat embed,#lpChat figure,#lpChat figcaption,#lpChat footer,#lpChat header,#lpChat menu,#lpChat nav,#lpChat output,#lpChat ruby,#lpChat section,#lpChat summary,#lpChat span,#lpChat time,#lpChat mark,#lpChat audio,#lpChat video,#lpChat p{margin:0;padding:0;border:0;vertical-align:baseline;background:inherit;background:initial;position:static;position:initial;color:inherit;width:auto;height:auto;text-shadow:none;box-shadow:none;-webkit-box-shadow:initial;line-height:normal;font-size:inherit}#lpChat input:not([type=\"radio\"]){margin:0;padding:0;border:0;vertical-align:baseline;background:inherit;background:initial;position:static;position:initial;color:black;width:auto;height:auto;text-shadow:none;box-shadow:none;-webkit-box-shadow:initial;line-height:normal}#lpChat input[type=\"radio\"],#lpChat textarea{margin:0;padding:0;border:0;vertical-align:baseline;position:static;position:initial;color:black;width:auto;height:auto;text-shadow:none;box-shadow:none;-webkit-box-shadow:initial;line-height:normal}#lpChat input[type=\"radio\"]{-moz-appearance:radio;-webkit-appearance:radio;appearance:radio}#lpChat textarea{font-size:inherit}#lpChat div,#lpChat button{margin:0;padding:0;border:0;outline:none;vertical-align:baseline;background:inherit;background:initial;position:static;position:initial;font-family:inherit;color:inherit;width:auto;height:auto;text-shadow:none;box-shadow:none;-webkit-box-shadow:initial;line-height:normal;font-size:inherit}#lpChat button{font-size:1em;border-radius:0}#lpChat input[type=\"checkbox\"]{-moz-appearance:checkbox;-webkit-appearance:checkbox;appearance:checkbox}#lpChat input{height:auto;vertical-align:middle}#lpChat .lpHide{display:none !important}#lpChat .lp_close-icon{position:relative !important;display:inline-block;overflow:hidden !important;width:24px !important;height:24px !important}#lpChat .lp_close-icon.lp_icon-white img{top:-40px !important;left:-480px !important}#lpChat .lp_close-icon img{top:0 !important;left:-480px !important;position:absolute !important}#lpChat .lp_minimize-icon{position:relative !important;display:inline-block;overflow:hidden !important;width:24px !important;height:24px !important}#lpChat .lp_minimize-icon.lp_icon-white img{top:-40px !important;left:-600px !important}#lpChat .lp_minimize-icon img{top:0 !important;left:-600px !important;position:absolute !important}#lpChat .lpHide{display:none !important}.lp_mobile #lpChat,.lp_tablet #lpChat,.lp_desktop #lpChat{font-family:\"Arial\"}.lp_mobile #lpChat>.lp_buffer-strip,.lp_tablet #lpChat>.lp_buffer-strip,.lp_desktop #lpChat>.lp_buffer-strip{display:none}.lp_mobile #lpChat>.lp_minimized .lp_header,.lp_tablet #lpChat>.lp_minimized .lp_header,.lp_desktop #lpChat>.lp_minimized .lp_header,.lp_mobile #lpChat>.lp_maximized .lp_header,.lp_tablet #lpChat>.lp_maximized .lp_header,.lp_desktop #lpChat>.lp_maximized .lp_header{border-color:#d6d6d6;border-width:1px;border-style:solid;font-size:1.1em;z-index:2;width:100%;position:absolute}.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper{width:100%;height:100%}.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_title,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_title,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_title,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title{direction:ltr}.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_title>*,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_title>*,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_title>*,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title>*,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title>*,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title>*{vertical-align:middle}.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_title .lp_top-text,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_title .lp_top-text,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_title .lp_top-text,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title .lp_top-text,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title .lp_top-text,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title .lp_top-text{overflow:hidden;text-overflow:ellipsis;display:inline-block;margin-left:8px;max-width:150px;white-space:nowrap}.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_title .lp_chatting-with-icon.lpHide ~ .lp_top-text,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_title .lp_chatting-with-icon.lpHide ~ .lp_top-text,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_title .lp_chatting-with-icon.lpHide ~ .lp_top-text,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title .lp_chatting-with-icon.lpHide ~ .lp_top-text,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title .lp_chatting-with-icon.lpHide ~ .lp_top-text,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title .lp_chatting-with-icon.lpHide ~ .lp_top-text{margin-left:0}.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_close.lp_hidden,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_close.lp_hidden,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_close.lp_hidden,.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_minimize.lp_hidden,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_minimize.lp_hidden,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_minimize.lp_hidden,.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_popout.lp_hidden,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_popout.lp_hidden,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_popout.lp_hidden,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_close.lp_hidden,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_close.lp_hidden,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_close.lp_hidden,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_minimize.lp_hidden,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_minimize.lp_hidden,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_minimize.lp_hidden,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_popout.lp_hidden,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_popout.lp_hidden,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_popout.lp_hidden{display:none}.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_close:disabled,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_close:disabled,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_close:disabled,.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_minimize:disabled,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_minimize:disabled,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_minimize:disabled,.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_popout:disabled,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_popout:disabled,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_popout:disabled,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_close:disabled,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_close:disabled,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_close:disabled,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_minimize:disabled,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_minimize:disabled,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_minimize:disabled,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_popout:disabled,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_popout:disabled,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_popout:disabled{cursor:default}.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_close:disabled img,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_close:disabled img,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_close:disabled img,.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_minimize:disabled img,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_minimize:disabled img,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_minimize:disabled img,.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_popout:disabled img,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_popout:disabled img,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_popout:disabled img,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_close:disabled img,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_close:disabled img,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_close:disabled img,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_minimize:disabled img,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_minimize:disabled img,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_minimize:disabled img,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_popout:disabled img,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_popout:disabled img,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_popout:disabled img{opacity:0.5}.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper button,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper button,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper button,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper button,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper button,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper button{padding:0;background:none;border:none;position:absolute;cursor:pointer}.lp_mobile #lpChat>.lp_minimized>.lp_main,.lp_tablet #lpChat>.lp_minimized>.lp_main,.lp_desktop #lpChat>.lp_minimized>.lp_main,.lp_mobile #lpChat>.lp_maximized>.lp_main,.lp_tablet #lpChat>.lp_maximized>.lp_main,.lp_desktop #lpChat>.lp_maximized>.lp_main{padding:0;z-index:1;height:100%;width:100%;position:absolute;bottom:0}.lp_mobile #lpChat>.lp_minimized>.lp_main>.lp_message,.lp_tablet #lpChat>.lp_minimized>.lp_main>.lp_message,.lp_desktop #lpChat>.lp_minimized>.lp_main>.lp_message,.lp_mobile #lpChat>.lp_maximized>.lp_main>.lp_message,.lp_tablet #lpChat>.lp_maximized>.lp_main>.lp_message,.lp_desktop #lpChat>.lp_maximized>.lp_main>.lp_message{text-align:center}.lp_mobile #lpChat>.lp_minimized>.lp_main>.lp_message>img[src=\"\"],.lp_tablet #lpChat>.lp_minimized>.lp_main>.lp_message>img[src=\"\"],.lp_desktop #lpChat>.lp_minimized>.lp_main>.lp_message>img[src=\"\"],.lp_mobile #lpChat>.lp_maximized>.lp_main>.lp_message>img[src=\"\"],.lp_tablet #lpChat>.lp_maximized>.lp_main>.lp_message>img[src=\"\"],.lp_desktop #lpChat>.lp_maximized>.lp_main>.lp_message>img[src=\"\"]{display:none}.lp_mobile #lpChat>.lp_minimized>.lp_main>.lp_message .lp_text,.lp_tablet #lpChat>.lp_minimized>.lp_main>.lp_message .lp_text,.lp_desktop #lpChat>.lp_minimized>.lp_main>.lp_message .lp_text,.lp_mobile #lpChat>.lp_maximized>.lp_main>.lp_message .lp_text,.lp_tablet #lpChat>.lp_maximized>.lp_main>.lp_message .lp_text,.lp_desktop #lpChat>.lp_maximized>.lp_main>.lp_message .lp_text{padding:10px 4px 0 4px;text-align:center}.lp_mobile #lpChat>.lp_minimized>.lp_main>.lp_message .lp_text:empty,.lp_tablet #lpChat>.lp_minimized>.lp_main>.lp_message .lp_text:empty,.lp_desktop #lpChat>.lp_minimized>.lp_main>.lp_message .lp_text:empty,.lp_mobile #lpChat>.lp_maximized>.lp_main>.lp_message .lp_text:empty,.lp_tablet #lpChat>.lp_maximized>.lp_main>.lp_message .lp_text:empty,.lp_desktop #lpChat>.lp_maximized>.lp_main>.lp_message .lp_text:empty{display:none}.lp_mobile #lpChat>.lp_minimized>.lp_main.lp_centered,.lp_tablet #lpChat>.lp_minimized>.lp_main.lp_centered,.lp_desktop #lpChat>.lp_minimized>.lp_main.lp_centered,.lp_mobile #lpChat>.lp_maximized>.lp_main.lp_centered,.lp_tablet #lpChat>.lp_maximized>.lp_main.lp_centered,.lp_desktop #lpChat>.lp_maximized>.lp_main.lp_centered{width:100%;text-align:center;display:table;border-collapse:collapse}.lp_mobile #lpChat>.lp_minimized>.lp_main.lp_centered>*,.lp_tablet #lpChat>.lp_minimized>.lp_main.lp_centered>*,.lp_desktop #lpChat>.lp_minimized>.lp_main.lp_centered>*,.lp_mobile #lpChat>.lp_maximized>.lp_main.lp_centered>*,.lp_tablet #lpChat>.lp_maximized>.lp_main.lp_centered>*,.lp_desktop #lpChat>.lp_maximized>.lp_main.lp_centered>*{vertical-align:middle;display:table-cell}.lp_mobile #lpChat>.lp_maximized,.lp_tablet #lpChat>.lp_maximized,.lp_desktop #lpChat>.lp_maximized{overflow:hidden;border:1px solid #d6d6d6;border-radius:5px 5px 0 0;box-shadow:0px 0px 16px 3px rgba(0,0,0,0.2)}.lp_mobile #lpChat>.lp_maximized>.lp_header,.lp_tablet #lpChat>.lp_maximized>.lp_header,.lp_desktop #lpChat>.lp_maximized>.lp_header{cursor:move}.lp_mobile #lpChat>.lp_maximized>.lp_main,.lp_tablet #lpChat>.lp_maximized>.lp_main,.lp_desktop #lpChat>.lp_maximized>.lp_main{background-color:#fff}.lp_mobile #lpChat>.lp_maximized.lp_external-window,.lp_tablet #lpChat>.lp_maximized.lp_external-window,.lp_desktop #lpChat>.lp_maximized.lp_external-window{border-radius:0;position:fixed;left:0;right:0;bottom:0;top:0;width:100%;height:100%}.lp_mobile #lpChat>.lp_maximized.lp_external-window>.lp_header,.lp_tablet #lpChat>.lp_maximized.lp_external-window>.lp_header,.lp_desktop #lpChat>.lp_maximized.lp_external-window>.lp_header{cursor:default}.lp_mobile #lpChat>.lp_maximized.lp_external-window>.lp_header .lp_header-content-wrapper .lp_minimize,.lp_tablet #lpChat>.lp_maximized.lp_external-window>.lp_header .lp_header-content-wrapper .lp_minimize,.lp_desktop #lpChat>.lp_maximized.lp_external-window>.lp_header .lp_header-content-wrapper .lp_minimize{display:none}.lp_mobile #lpChat>.lp_maximized>.lp_header,.lp_tablet #lpChat>.lp_maximized>.lp_header,.lp_desktop #lpChat>.lp_maximized>.lp_header{border-radius:5px 5px 0 0;background-color:#f0f0f0}.lp_mobile #lpChat>.lp_minimized,.lp_tablet #lpChat>.lp_minimized,.lp_desktop #lpChat>.lp_minimized{border-radius:5px 5px 0 0}.lp_mobile #lpChat>.lp_minimized .lp_header,.lp_tablet #lpChat>.lp_minimized .lp_header,.lp_desktop #lpChat>.lp_minimized .lp_header{border-radius:5px 5px 0 0;background-color:#f0f0f0;box-shadow:0px 0px 16px 3px rgba(0,0,0,0.2);height:100%}.lp_mobile #lpChat>.lp_minimized .lp_header .lp_title,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_title,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_title{color:#000;width:100%;padding:10px 0 0 9px;text-align:left}.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper{border-radius:inherit}.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper>div,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper>div,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper>div{border-radius:inherit}.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper{text-align:center;display:table;border-collapse:collapse}.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper>*,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper>*,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper>*,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper>*{vertical-align:middle;display:table-cell}.lp_mobile #lpChat>.lp_buffer-strip,.lp_tablet #lpChat>.lp_buffer-strip{position:fixed;opacity:0.95;bottom:0;left:0;right:0}.lp_mobile #lpChat>.lp_buffer-strip .lp_buffer-strip-container,.lp_tablet #lpChat>.lp_buffer-strip .lp_buffer-strip-container{width:100%;height:100%}.lp_mobile #lpChat>.lp_maximized,.lp_tablet #lpChat>.lp_maximized{z-index:99999999;opacity:0.95;position:fixed;top:0;right:0;bottom:0;left:0;border-radius:0}.lp_mobile #lpChat>.lp_maximized>.lp_header,.lp_tablet #lpChat>.lp_maximized>.lp_header{direction:ltr;height:8%;min-height:40px}.lp_mobile #lpChat>.lp_maximized>.lp_header .lp_title,.lp_tablet #lpChat>.lp_maximized>.lp_header .lp_title{width:100%;text-align:center}.lp_mobile #lpChat>.lp_maximized>.lp_header .lp_title .lp_top-text,.lp_tablet #lpChat>.lp_maximized>.lp_header .lp_title .lp_top-text{text-align:center}.lp_mobile #lpChat>.lp_maximized>.lp_header button,.lp_tablet #lpChat>.lp_maximized>.lp_header button{top:0;right:0;height:100%;width:40px;text-align:center;position:absolute}.lp_mobile #lpChat>.lp_maximized>.lp_header button.lp_popout,.lp_tablet #lpChat>.lp_maximized>.lp_header button.lp_popout{display:none}.lp_mobile #lpChat>.lp_maximized>.lp_header button.lp_close,.lp_tablet #lpChat>.lp_maximized>.lp_header button.lp_close{right:0}.lp_mobile #lpChat>.lp_maximized>.lp_header button.lp_minimize,.lp_tablet #lpChat>.lp_maximized>.lp_header button.lp_minimize{right:auto;left:0}.lp_mobile #lpChat>.lp_maximized>.lp_main,.lp_tablet #lpChat>.lp_maximized>.lp_main{height:92%}.lp_mobile #lpChat>.lp_minimized,.lp_tablet #lpChat>.lp_minimized{position:fixed;z-index:99999999;top:33%;right:0;min-width:40px;height:33%;border-radius:5px 0 0 5px}.lp_mobile #lpChat>.lp_minimized>.lp_main,.lp_tablet #lpChat>.lp_minimized>.lp_main{height:100%}.lp_mobile #lpChat>.lp_minimized>.lp_main>.lp_header,.lp_tablet #lpChat>.lp_minimized>.lp_main>.lp_header{direction:ltr;border-radius:5px 0 0 5px}.lp_mobile #lpChat>.lp_minimized>.lp_main>.lp_header button,.lp_tablet #lpChat>.lp_minimized>.lp_main>.lp_header button{width:100%;text-align:center;padding-top:8px}.lp_mobile #lpChat>.lp_minimized>.lp_main>.lp_header .lp_title,.lp_tablet #lpChat>.lp_minimized>.lp_main>.lp_header .lp_title{padding:0;position:absolute;top:50%;left:-45px;width:130px;white-space:nowrap;-webkit-transform:rotate(270deg);-ms-transform:rotate(270deg);transform:rotate(270deg)}.lp_mobile #lpChat>.lp_minimized>.lp_main>.lp_header .lp_title .lp_top-text,.lp_tablet #lpChat>.lp_minimized>.lp_main>.lp_header .lp_title .lp_top-text{max-width:120px}.lp_desktop #lpChat{font-size:13px}.lp_desktop #lpChat>*{width:280px;z-index:99999999;position:fixed;right:20px;bottom:0}.lp_desktop #lpChat>* .lp_header{height:36px}.lp_desktop #lpChat>* .lp_header button{z-index:99999999;top:6px}.lp_desktop #lpChat>.lp_maximized{height:400px}.lp_desktop #lpChat>.lp_maximized>.lp_header{padding:0px 5px}.lp_desktop #lpChat>.lp_maximized>.lp_header .lp_title{float:left;padding-top:9px;padding-left:3px}.lp_desktop #lpChat>.lp_maximized>.lp_header .lp_header-content-wrapper button{position:relative}.lp_desktop #lpChat>.lp_maximized>.lp_header .lp_header-content-wrapper button.lp_close,.lp_desktop #lpChat>.lp_maximized>.lp_header .lp_header-content-wrapper button.lp_minimize{display:inline-block}.lp_desktop #lpChat>.lp_maximized>.lp_header .lp_header-content-wrapper button.lp_close,.lp_desktop #lpChat>.lp_maximized>.lp_header .lp_header-content-wrapper button.lp_minimize,.lp_desktop #lpChat>.lp_maximized>.lp_header .lp_header-content-wrapper button.lp_popout{float:right}.lp_desktop #lpChat>.lp_maximized>.lp_main{height:auto;top:36px}.lp_desktop #lpChat>.lp_maximized>.lp_main.lp_centered{top:auto;padding-top:36px;height:100%}:root .lp_desktop #lpChat>.lp_maximized>.lp_main.lp_centered{padding-top:0}.lp_desktop #lpChat>.lp_maximized.lp_external-window{border-radius:0;position:absolute;left:0;right:0;bottom:0;top:0;width:100%;height:100%;margin:0 auto;max-width:600px}.lp_desktop #lpChat>.lp_maximized.lp_external-window>.lp_header .lp_close,.lp_desktop #lpChat>.lp_maximized.lp_external-window>.lp_header .lp_minimize{display:none}.lp_desktop #lpChat>.lp_minimized{height:36px}.lp_desktop #lpChat>.lp_minimized .lp_header .lp_close{right:12px}.lp_desktop #lpChat>.lp_minimized>.lp_main{width:100%;height:100%}.lp_mobile #lpChat{font-size:14px}.lp_tablet #lpChat{font-size:18px}.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title .lp_top-text{max-width:250px}.lp_mobile.lp_landscape #lpChat>.lp_maximized .lp_header,.lp_tablet.lp_landscape #lpChat>.lp_maximized .lp_header{display:none !important}.lp_mobile.lp_landscape #lpChat>.lp_maximized>.lp_main,.lp_tablet.lp_landscape #lpChat>.lp_maximized>.lp_main{padding-top:0;top:0;height:100%}.lp_mobile.lp_landscape #lpChat>.lp_minimized{height:47%}',{\nid:Ce.STYLE_TAG_ID})}function q(e){var t=document.createElement(\"iframe\");e.appendChild(t);return t.contentWindow.document}function J(){clearTimeout(ue)}function X(e){var t=Ce.WRAPPER_DIV_CSS_CLASS_PREFIX;if(e.landscape){we.removeClass(ne,t+Ce.PORTRAIT_CSS_CLASS);we.addClass(ne,t+Ce.LANDSCAPE_CSS_CLASS)}else{we.removeClass(ne,t+Ce.LANDSCAPE_CSS_CLASS);we.addClass(ne,t+Ce.PORTRAIT_CSS_CLASS)}}function Z(){we.addClass(pe,Ce.EXTERNAL_CSS_CLASS)}var Y,K,$,Q,ee,te,ie,ne,le,ae,pe,oe,re,de,se,_e,me,ce,he,ue,ge=\"WrapperWindow\",fe=lpTag.unifiedWindow,Ce={STYLE_TAG_ID:\"lpChatStyle\",WRAPPER_DIV_ID:\"lpChat\",WRAPPER_DIV_CSS_CLASS_PREFIX:\"lp_\",MOBILE_CSS_CLASS:\"mobile\",TABLET_CSS_CLASS:\"tablet\",DESKTOP_CSS_CLASS:\"desktop\",ANDROID_CSS_CLASS:\"android\",IOS_CSS_CLASS:\"ios\",IOS6_CSS_CLASS:\"ios6\",IOS8_CSS_CLASS:\"ios8\",MAC_OSX_CSS_CLASS:\"mac_osx\",NATIVE_CSS_CLASS:\"native_android\",EXTERNAL_CSS_CLASS:\"lp_external-window\",PORTRAIT_CSS_CLASS:\"portrait\",LANDSCAPE_CSS_CLASS:\"landscape\",MINIMIZED_VIEW_IFRAME_RENDERING:!1,MAXIMIZED_VIEW_IFRAME_RENDERING:!1,WAIT_INDICATION_DELAY:250},be=fe.language,we=lpTag.taglets.lpUtil,xe=fe.log,ve={CONNECTION_UNAVAILABLE:{text:\"connection unavailable\",imgUrl:\"connect-error-dark.png\",title:be.getString(\"couldNotConnect\"),error:!0},RIP:{title:\"Error\",imgUrl:\"connect-error-dark.png\",text:be.getString(\"chatEndedOnExternalWindow\"),error:!0},EXTERNAL_OPEN:{title:\"Error\",imgUrl:\"connect-error-dark.png\",text:be.getString(\"externalWindowOpen\"),error:!0},UNSUPPORTED:{title:\"Error\",imgUrl:\"connect-error-dark.png\",text:be.getString(\"unsupportedBrowserMode\"),error:!0},IN_SESSION:{title:\"Error\",imgUrl:\"connect-error-dark.png\",text:be.getString(\"cannotResumeChat\"),error:!0},WAIT:{title:be.getString(\"loading\"),imgUrl:\"loader_on_warmGray5_75.gif\",imgAltText:be.getString(\"loading\")}},Se=!1;te=we.objectKeys(ve);var ze={isMaximized:!0};O(e,t,i);return{render:_,show:d,hide:s,message:o,removeMessage:k,unbindDomEvents:z,setTitle:r,Messages:te,getMinimizedElement:c,getBufferStripElement:h,getMaximizedElement:u,getMainWindowElement:m,getChatWrapperElement:g,dispose:b,showClose:f,showMinimized:C,getIconRepository:T}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.defaultDictionary={couldNotConnect:\"Oops - unable to connect.\",tryAgain:\"Try again\",loadingOnMinimize:\"Loading\",loading:\"Loading\",unableToConnect:\"Unable to connect\",reconnect:\"Trying to reconnect\",chatEndedOnExternalWindow:\"Close window in order to start new chat\",externalWindowOpen:\"You have an ongoing chat. Return to that window to continue the chat.\",unsupportedBrowserMode:\"Your browser is in incognito mode, please open a regular browser session to chat\",cannotResumeChat:\"Resume chat from the tab where the interaction began\",tooltip_Close:\"Close\",tooltip_Minimize:\"Minimize\"};window.lpTag=window.lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.taglets.lpUnifiedWindow=lpTag.taglets.lpUnifiedWindow||function(){function e(e){K.setLogLevel(\"DEBUG\");e&&e.constructor===Array?$.convertConfig(e,ie):ie=e||ie;v(ie);K.init({debug:ie.debug});K.info(\"init\",X);M=window.lpTag.taglets.lpSecureStorage;H=new Y.DeviceDetector;z(ie,ee);j=new Y.BrowserStateManager(H);W=new lpTag.unifiedWindow.Events({eventBufferLimit:0,cloneEventData:!1});K.info(\"init: initial configuration: \"+JSON.stringify(ie),X);a();k();\"#RIP\"!==window.location.hash?M.configure({debug:ie.debug,unifiedWindow:{site:ie.accountId,url:ie.secureStorageLocation,initialStorageType:ie.initialStorageType,force:!0,chosenStorageHandler:l}}):y(U.Messages.RIP,!0)}function t(e){K.info(\"started: \"+JSON.stringify(e),X);\"undefined\"==typeof ie.embeddedSupported?ie.startedEngConf=e:i(e)}function i(e){K.info(\"clicked: \"+JSON.stringify(e),X);if(Y.Application&&G&&G.methods&&!G.methods.isDisposed())W.trigger({appName:X,eventName:\"maximize\"});else if(j.isConnected()){G&&G.methods&&G.methods.isDisposed()&&D();if(ie.browserModeUnSupported){y(U.Messages.UNSUPPORTED,!0);return}if(r(e))o(e);else{a();P.getState(c(e),c(e))}}else y(U.Messages.CONNECTION_UNAVAILABLE)}function n(){K.info(\"inspect\",X);return{conf:ie}}function l(e){\"object\"!=typeof e?ie.secureStorageType=e:e&&e.error&&(ie.browserModeUnSupported=!0);ie.popoutSupported=ie.secureStorageType&&ie.secureStorageType!==M.storageTypes.SESSIONSTORAGE&&j.visibilitySupported();ie.embeddedSupported=!!ie.secureStorageType;d()}function a(){U||(U=new Y.WrapperWindow(ie,H,j));V||(V=new Y.SessionManager({accountId:ie.accountId,sessionId:ie.sessionId,external:ie.external,events:W}));ie.sessionId=V.getSessionId();P||(P=new Y.StateAnalyzer({sessionId:ie.sessionId,accountId:ie.accountId,secureStorageLocation:ie.secureStorageLocation},V))}function p(e){var t={accountId:ie.accountId,sessionId:ie.sessionId,secureStorageType:ie.secureStorageType,supportBlockCCPattern:ie.supportBlockCCPattern,isIntP:S(),engConf:{scid:e.scid,cid:e.cid,eid:e.eid,lang:e.lang,svid:e.svid,ssid:e.ssid,lewid:e.lewid,isOffline:e.isOffline},external:!0};e.skill&&(t.engConf.skill=e.skill);(\"dev\"===e.env||\"qa\"===e.env)&&(t.env=e.env);return t}function o(e){K.info(\"_openWindow\",X);var t=\"menubar=no, location=no, resizable=false, scrollbars=no, status=yes, width=280px, height=400px, modal=true\",i=p(e);ie.openedExternal=window.open(ie.codeRepository+\"/index.html?lpUnifiedWindowConfig=\"+encodeURIComponent($.stringify(i)),e.target+\"POP\",t)}function r(e){return!ie.embeddedSupported||e.isPopOut||!H.isMobileOptimized()&&!H.isDesktop()}function d(){K.info(\"_manage\",X);P.getState(m,m)}function s(e,t,i){if(_()){K.info(\"_clickStateCallback: external / popped out window is open\",X);y(U.Messages.EXTERNAL_OPEN,!0)}else{J=t;switch(t){case P.state.INVALID:K.info(\"_clickStateCallback: is INVALID state, nothing to do\",X);y(U.Messages.IN_SESSION);return;case P.state.IN_SESSION:return{uiState:e};case P.state.NOT_STARTED:return i?{engConf:i}:void 0}K.error(\"_resolveProperStates: BUG - undefined state\",X)}}function _(){if(ie.openedExternal){if(!ie.openedExternal.closed)return!0;ie.openedExternal=void 0;delete ie.openedExternal}return!1}function m(e,t){K.info(\"_startStateCallback\",X);var n=s(e,t);if(ie.external){n&&n.uiState&&n.uiState.chat&&n.uiState.chat.state===pe&&(n.uiState={engConf:n.uiState.engConf});f(n||ie)}else n?j.isConnected()?f(n):y(U.Messages.CONNECTION_UNAVAILABLE):ie.startedEngConf&&i(ie.startedEngConf)}function c(e){return function(t,i){K.info(\"_clickStateCallback\",X);var n=s(t,i,e);n&&f(n)}}function h(e){if(B&&!0===le&&ne&&!G){var t={window:B,unified:ie,uiState:e};K.info(\"_loadingCompleted, config: \"+JSON.stringify(t),X);V.refresh();G=Y.Application(t,{browserStateManager:j,deviceDetector:H,wrapperWindow:U,events:W})}else K.info(\"_loadingCompleted: still missing data/files\",X)}function u(e){K.info(\"_createWindowConfigLoaded\",X);return function(t){K.info(\"_windowConfigLoaded\",X);if(t&&!t.error){B=t;h(e)}else{y(U.Messages.CONNECTION_UNAVAILABLE);K.error(\"_windowConfigLoaded: Cannot load configuration\",X)}}}function g(e){K.info(\"_createAppLoaded\",X);return function(t){K.info(\"_appLoaded\",X);if(t){y(U.Messages.CONNECTION_UNAVAILABLE);O();K.error(\"_appLoaded: Cannot load application\",X)}else{le=!0;h(e)}}}function f(e){K.info(\"_startApplication\",X);var t;if(e.uiState)t=e.uiState;else{t=$.cloneExtend(ee);t.engConf=e.engConf}U.render(t&&t.window,function(){ne=!0;U.message(U.Messages.WAIT);h(t)},!0);var i={sessionId:ie.sessionId,accountId:ie.accountId,secureStorageLocation:ie.secureStorageLocation,domain:ie.acCdnDomain};t.engConf&&\"undefined\"!=typeof t.engConf.lewid&&(i.windowId=t.engConf.lewid);F=new Y.WindowConfigurationManager(i);F.getConf(u(t));w(g(t),t.engConf)}function C(e){var t={},i=H.getDeviceFamilyName().toLowerCase();Y.Application||(t=ie.loadObj||{framework:ie.codeRepository+\"/ui-framework.js\"+Q,chatAPI:\"https://\"+ie.akamaiDomain+\"/hcp/html/\"+(\"dev\"===ie.env||\"qa\"===ie.env?\"lpsunco/lpChatV3.js\":\"lpChatV3.min.js\")+Q,surveyLogic:\"https://\"+ie.akamaiDomain+\"/hcp/html/\"+(\"dev\"===ie.env||\"qa\"===ie.env?\"lpsunco/surveylogicinstance.js\":\"surveylogicinstance.min.js\")+Q,unified:{dependency:[\"framework\",\"chatAPI\",\"surveyLogic\"],url:ie.codeRepository+\"/\"+i+\"Embedded.js\"+Q}});e&&e.lang&&\"en-us\"!==e.lang.toLowerCase()&&(t.lang=ie.langRepository+\"/\"+e.lang+\".js\"+Q);ie.supportBlockCCPattern&&(ie.poppedOut||ie.external||r(e))&&(t.cleanCCPatterns=ie.codeRepository+\"/cleanCCPatterns.js\");return t}function b(e,t){K.info(\"_loadFramework, loading: \"+JSON.stringify(e),X);if($.isEmpty(e)){K.info(\"_loadFramework: Application exists, starting\",X);$.runCallback(t)}else{K.info(\"_loadFramework: Loading files\",X);lpTag.taglets.jsLoader.loadJS({loadObj:e,success:function(){K.info(\"_loadFramework: Files loaded\",X);$.runCallback(t)},error:function(e){K.error(\"_loadFramework: Error Loading files \"+JSON.stringify(e),X);$.runCallback(t,null,e||{})}})}}function w(e,t){K.info(\"_loadFramework\",X);var i=C(t);b(i,e)}function x(e){var t={\"base.liveperson.net\":\"chatcon1.liveperson.net\",\"dev.liveperson.net\":\"chatcon2.liveperson.net\",\"server.iad.liveperson.net\":\"chatcon3.liveperson.net\",\"sales.liveperson.net\":\"chatcon4.liveperson.net\",\"server.lon.liveperson.net\":\"chatcon5.liveperson.net\"};return t[e]?t[e]:e}function v(e){K.info(\"_setSiteAndDebug: \"+JSON.stringify(e),X);e.accountId=lpTag.site||e.accountId;e.domain=lpTag.csds.getDomain(S()?oe.INTERACTION_PLATFORM:oe.ADMIN_AREA);e.domain=e.domain||lpTag.csds.getDomain(oe.ALL);e.domain=\"hc1\"===e.domain?\"hc1.dev.lprnd.net\":e.domain;e.staticFilesDomain=lpTag.csds.getDomain(oe.ALL);e.staticFilesDomain=\"hc1\"===e.staticFilesDomain?\"hc1.dev.lprnd.net\":e.staticFilesDomain;(e.debug||e.accountId&&0===e.accountId.indexOf(\"qa\")||e.domain&&0===e.domain.indexOf(\"hc1\"))&&(e.debug=!0)}function S(){return!(!ie.isIntP&&!lpTag.taglets.lpInteractionPlatformEnabled)}function z(e,t){var i;K.info(\"_initDefaultValues: \"+JSON.stringify({conf:e,data:t}),X);e.leCdnDomain=e.leCdnDomain||lpTag.csds.getDomain(oe.LECDN);e.acCdnDomain=e.acCdnDomain||lpTag.csds.getDomain(oe.ACCDN);i=\"https://\"+e.leCdnDomain+\"/\";e.codeRepository=i+(e.codeRepository?e.codeRepository:\"le_unified_window\");e.imagesRepository=i+(e.imagesRepository?e.imagesRepository:\"le_unified_window/resources\");e.iconsRepository=i+(e.iconsRepository?e.iconsRepository:\"le_unified_window/resources/icons\")+\"/\"+H.getDeviceFamilyName().toLowerCase();e.audioRepository=i+(e.audioRepository?e.audioRepository:\"le_unified_window/resources/audio\");e.langRepository=i+(e.langRepository?e.langRepository:\"le_unified_window/resources/i18n\");e.agentImageRepository=i+(e.agentImageRepository?e.agentImageRepository:\"le_unified_window/resources/agentImages\");e.secureStorageLocation=e.external?M.sessionStorageStaticDomain:e.secureStorageLocation||i+\"le_secure_storage/\";e.akamaiDomain=x(e.staticFilesDomain);(H.isMobile()||H.isTablet())&&(t.position={right:0});t.window.embedded=!e.external;e.supportBlockCCPattern=e.supportBlockCCPattern||lpTag.taglets.cleanCCPatterns&&t.window.embedded}function y(e,t){q&&clearTimeout(q);U.render(null,function(){U.message(e)});t||ie.poppedOut||ie.external||(q=setTimeout(function(){U.dispose()},ae))}function k(){j.on(j.EVENT_NAME.FOCUS_CHANGE,E);W.bind({appName:\"ChatStateManager\",eventName:\"ended\",func:O});W.bind({appName:\"Application\",eventName:\"appEnded\",func:D});W.bind({appName:\"*\",eventName:\"doHaraKiri(Seppuku)\",func:R});W.bind({appName:\"SessionManager\",eventName:\"sessionChanged\",func:I});W.bind({appName:\"ChatAPIV3\",eventName:\"error\",func:T})}function T(){R();y(U.Messages.CONNECTION_UNAVAILABLE)}function E(e){if(e.focus&&J===te){V=V||new Y.SessionManager({accountId:ie.accountId});var t=V.getSessionCookie();if(t&&t[0]&&\"null\"!==t[0]){V=null;a();P.getState(A,A)}}}function I(){K.info(\"_analyzeStateOnSessionChanged\",X);if(V){var e=V.getSessionCookie();if(e&&e[0]&&\"null\"!==e[0]){O(!0);a();P.getState(A,A)}else O()}}function A(e,t){J=t;switch(t){case P.state.INVALID:K.info(\"_clickStateCallback: is INVALID state, nothing to do\",X);y(U.Messages.IN_SESSION);break;case P.state.IN_SESSION:N(e.engConf);break;case P.state.NOT_STARTED:D()}}function N(e){D();i(e)}function R(){K.info(\"_seppuku\",X);O();D()}function O(e){J=te;if(V){V.dispose(e);V=null}B=null;if(F){F.clear();F=null}ie.sessionId=null;delete ie.sessionId;P=null}function L(){Y.language.clear()}function D(){le=!1;ne=!1;if(G){G.methods.end();G=null}U=null;L();a()}var W,M,P,U,j,H,V,F,B,G,q,J,X=\"lpUnifiedWindow\",Z=\"4.2.3\",Y=lpTag.unifiedWindow,K=Y.log,$=lpTag.taglets.lpUtil,Q=\"?version=\"+Z,ee={window:{maximized:!0,position:{right:20,bottom:0},sound:!0,notificationCount:0,actionsVisible:!1,embedded:!0}},te=3,ie={},ne=!1,le=!1,ae=5e3,pe=\"applicationEnded\",oe={ADMIN_AREA:\"adminArea\",INTERACTION_PLATFORM:\"interactionPlatform\",ALL:\"ALL\",LECDN:\"leCdnDomain\",ACCDN:\"acCdnDomain\"};return{v:Z,name:X,init:e,start:t,clicked:i,inspect:n}}();window.lpTag=window.lpTag||{};lpTag.domainUtil=function(){function e(e){e=\"\"+e;var t,l,a=null,p={top:null,country:null},o=new RegExp(/(http{1}s{0,1}?:\\/\\/){0,1}([^\\/\\?/:]+)(\\/?)/gi),r=o.exec(e);e=r[2]||e;t=e.split(\".\");if(t.length<3)return e;for(var d=t.length-1,s=d;s>-1;s--){n(t[s],p,s);if(null!==p.country&&null!==p.top)break}if(null!==p.top||null!==p.country){a=p.top;(null===a||null!==p.country&&p.country<a&&a-1===p.country)&&(a=p.country);l=a>0?a-1:a;return i(t.slice(l))}return e}function t(e,t){var i=new RegExp(/(http{1}s{0,1}?:\\/\\/){0,1}([^\\/\\?/:]+)(\\/?)/gi),n=i.exec(e),l=null;if(n&&n.length>=3&&\"\"!==n[2]){l=n[2].toLowerCase();t&&(l=n[1]+l)}return l}function i(e){return e.join(\".\")}function n(e,t,i){e=\"\"+e;p.topLevelDomain[e]||p.customTopLevelDomain[e]?t.top=i:p.countryTopLevelDomain[e]&&(t.country=i)}var l=\"1.0\",a=\"domainUtil\",p={customTopLevelDomain:{aero:\"aero\",asia:\"asia\",bike:\"bike\",biz:\"biz\",camera:\"camera\",cat:\"cat\",clothing:\"clothing\",coop:\"coop\",equipment:\"equipment\",estate:\"estate\",eus:\"eus\",gallery:\"gallery\",graphics:\"graphics\",guru:\"guru\",info:\"info\",\"int\":\"int\",holdings:\"holdings\",jobs:\"jobs\",lighting:\"lighting\",mobi:\"mobi\",museum:\"museum\",name:\"name\",photography:\"photography\",plumbing:\"plumbing\",post:\"post\",pro:\"pro\",singles:\"singles\",tel:\"tel\",travel:\"travel\",ventures:\"ventures\",xxx:\"xxx\"},topLevelDomain:{ac:\"ac\",co:\"co\",com:\"com\",edu:\"edu\",gov:\"gov\",mil:\"mil\",net:\"net\",org:\"org\"},countryTopLevelDomain:{ac:\"ac\",ad:\"ad\",ae:\"ae\",af:\"af\",ag:\"ag\",ai:\"ai\",al:\"al\",am:\"am\",an:\"an\",ao:\"ao\",aq:\"aq\",ar:\"ar\",as:\"as\",at:\"at\",au:\"au\",aw:\"aw\",ax:\"ax\",az:\"az\",ba:\"ba\",bb:\"bb\",bd:\"bd\",be:\"be\",bf:\"bf\",bg:\"bg\",bh:\"bh\",bi:\"bi\",bj:\"bj\",bm:\"bm\",bn:\"bn\",bo:\"bo\",bq:\"bq\",br:\"br\",bs:\"bs\",bt:\"bt\",bv:\"bv\",bw:\"bw\",by:\"by\",bz:\"bz\",bzh:\"bzh\",ca:\"ca\",cc:\"cc\",cd:\"cd\",cf:\"cf\",cg:\"cg\",ch:\"ch\",ci:\"ci\",ck:\"ck\",cl:\"cl\",cm:\"cm\",cn:\"cn\",co:\"co\",cr:\"cr\",cs:\"cs\",cu:\"cu\",cv:\"cv\",cw:\"cw\",cx:\"cx\",cy:\"cy\",cz:\"cz\",dd:\"dd\",de:\"de\",dj:\"dj\",dk:\"dk\",dm:\"dm\",\"do\":\"do\",dz:\"dz\",ec:\"ec\",ee:\"ee\",eg:\"eg\",eh:\"eh\",er:\"er\",es:\"es\",et:\"et\",eu:\"eu\",fi:\"fi\",fj:\"fj\",fk:\"fk\",fm:\"fm\",fo:\"fo\",fr:\"fr\",ga:\"ga\",gb:\"gb\",gd:\"gd\",ge:\"ge\",gf:\"gf\",gg:\"gg\",gh:\"gh\",gi:\"gi\",gl:\"gl\",gm:\"gm\",gn:\"gn\",gp:\"gp\",gq:\"gq\",gr:\"gr\",gs:\"gs\",gt:\"gt\",gu:\"gu\",gw:\"gw\",gy:\"gy\",hk:\"hk\",hm:\"hm\",hn:\"hn\",hr:\"hr\",ht:\"ht\",hu:\"hu\",id:\"id\",ie:\"ie\",il:\"il\",im:\"im\",\"in\":\"in\",io:\"io\",iq:\"iq\",ir:\"ir\",is:\"is\",it:\"it\",je:\"je\",jm:\"jm\",jo:\"jo\",jp:\"jp\",ke:\"ke\",kg:\"kg\",kh:\"kh\",ki:\"ki\",km:\"km\",kn:\"kn\",kp:\"kp\",kr:\"kr\",\"krd:\":\"krd\",kw:\"kw\",ky:\"ky\",kz:\"kz\",la:\"la\",lb:\"lb\",lc:\"lc\",li:\"li\",lk:\"lk\",lr:\"lr\",ls:\"ls\",lt:\"lt\",lu:\"lu\",lv:\"lv\",ly:\"ly\",ma:\"ma\",mc:\"mc\",md:\"md\",me:\"me\",mg:\"mg\",mh:\"mh\",mk:\"mk\",ml:\"ml\",mm:\"mm\",mn:\"mn\",mo:\"mo\",mp:\"mp\",mq:\"mq\",mr:\"mr\",ms:\"ms\",mt:\"mt\",mu:\"mu\",mv:\"mv\",mw:\"mw\",mx:\"mx\",my:\"my\",mz:\"mz\",na:\"na\",nc:\"nc\",ne:\"ne\",nf:\"nf\",ng:\"ng\",ni:\"ni\",nl:\"nl\",no:\"no\",np:\"np\",nr:\"nr\",nu:\"nu\",nz:\"nz\",om:\"om\",pa:\"pa\",pe:\"pe\",pf:\"pf\",pg:\"pg\",ph:\"ph\",pk:\"pk\",pl:\"pl\",pm:\"pm\",pn:\"pn\",pr:\"pr\",ps:\"ps\",pt:\"pt\",pw:\"pw\",py:\"py\",qa:\"qa\",re:\"re\",ro:\"ro\",rs:\"rs\",ru:\"ru\",rw:\"rw\",sa:\"sa\",sb:\"sb\",sc:\"sc\",sd:\"sd\",se:\"se\",sg:\"sg\",sh:\"sh\",si:\"si\",sj:\"sj\",sk:\"sk\",sl:\"sl\",sm:\"sm\",sn:\"sn\",so:\"so\",sr:\"sr\",ss:\"ss\",st:\"st\",su:\"su\",sv:\"sv\",sx:\"sx\",sy:\"sy\",sz:\"sz\",tc:\"tc\",td:\"td\",tf:\"tf\",tg:\"tg\",th:\"th\",tj:\"tj\",tk:\"tk\",tl:\"tl\",tm:\"tm\",tn:\"tn\",to:\"to\",tp:\"tp\",tr:\"tr\",tt:\"tt\",tv:\"tv\",tw:\"tw\",tz:\"tz\",ua:\"ua\",ug:\"ug\",uk:\"uk\",us:\"us\",uy:\"uy\",uz:\"uz\",va:\"va\",vc:\"vc\",ve:\"ve\",vg:\"vg\",vi:\"vi\",vn:\"vn\",vu:\"vu\",wf:\"wf\",ws:\"ws\",ye:\"ye\",yt:\"yt\",yu:\"yu\",za:\"za\",zm:\"zm\",zr:\"zr\"}};return{v:l,name:a,getParentDomain:e,getDomain:t}}();","name":"lpUnifiedWindow"},{"code":"\"undefined\"==typeof lpTag.taglets&&(lpTag.taglets={});lpTag.taglets.rendererStub=function(){function e(e){e.tglName=\"offsite\";c(e)}function n(e){e.tglName=\"offsite\";e.forceOffline=!0;c(e)}var t=\"0.8\",a=\"rendererStub\",g={0:\"peeling\",1:\"overlay\",2:\"toaster\",3:\"slider\",5:\"overlay\",6:\"overlay\"},i={CHAT:\"CHAT\",ACCDN:\"acCdnDomain\",LPCDN:\"leCdnDomain\"},o=[],l=function(){lpTag.log(\"rendererStub init called\",\"DEBUG\",\"LP_OFFER\");if(T()){lpTag.events.bind(\"LE_ENGAGER\",\"SHOW\",r);lpTag.events.bind(\"ChatAPIV3\",\"chatting\",d);lpTag.events.bind(\"LE_ENGAGER\",\"CHAT\",e);lpTag.events.bind(\"LE_ENGAGER\",\"SURVEY\",n)}},r=function(e){if(\"object\"==typeof e){lpTag.log(\"rendererStub received new smt msg. {id:\"+e.engagementId+\" ,type:\"+e.engagementType+\",revision:\"+e.engagementRevision+\",campaignId \"+e.campaignId+\"}\",\"DEBUG\",\"LP_OFFER\");if(\"undefined\"!=typeof e.controlGroup&&e.controlGroup)s(e);else{u(e);c(e);p(e)}}},d=function(){lpTag.log(\"rendererStub received hide engagements event.\",\"DEBUG\",\"LP_OFFER\");lpTag.events.trigger(\"LP_OFFERS\",\"HIDE\")},s=function(e){lpTag.log(\"rendererStub::controlGroup is true for campaignID: \"+e.campaignId+\" - engagementId: \"+e.engagementId);var n=[{type:\"impDisplay\",campaign:e.campaignId,engId:e.engagementId,revision:e.engagementRevision,eContext:[{type:\"engagementContext\",id:e.contextId}]}];lpTag.sdes.send(n,function(){lpTag.log(\"rendererStub:::impression event send for \"+e.campaignId+\" - engagementId: \"+e.engagementId)});lpTag.events.trigger(\"LP_OFFERS\",\"CONTROL_GROUP\",e)},c=function(e){if(\"object\"!=typeof lpTag.taglets[e.tglName]){var n={},a=lpTag.protocol+\"//\"+lpTag.csds.getDomain(i.LPCDN)+\"/le_re/jsv2/\";n.UISuite=a+\"UISuite.js?_v=\"+t;n[e.tglName]=a+e.tglName+\".js?_v=\"+t;lpTag.taglets.jsLoader.loadJS({loadObj:n,success:function(){f(e)},error:function(){lpTag.log(\"Loading taglet: \"+e.tglName+\"   failed.\",\"ERROR\",\"LP_OFFER\")}})}else f(e)},p=function(e){var n=lpTag.protocol+\"//\"+lpTag.csds.getDomain(i.ACCDN)+\"/api/account/\"+lpTag.site+\"/configuration/le-campaigns/campaigns/\"+e.campaignId+\"/engagements/\"+e.engagementId+\"/revision/\"+e.engagementRevision;lpTag.log(\"loadEngagementConfig called with url: \"+n,\"DEBUG\",\"LP_OFFER\");lpTag.taglets.jsonp.issueCall({url:n,callbackName:\"lp\"+e.engagementId,success:function(n){lpTag.log(\"Engagement \"+e.engagementId+\" loaded\",\"DEBUG\",\"LP_OFFER\");o[e.confKey]=n;f(e)},error:function(){lpTag.log(\"Loading engagement: \"+e.engagementId+\"   failed.  id : \",\"ERROR\",\"LP_OFFER\")}})},m=function(e){return\"object\"==typeof lpTag.taglets[e.tglName]&&(\"undefined\"!=typeof o[e.confKey]||\"offsite\"===e.tglName)},f=function(e){if(m(e)){lpTag.log(\"taglet \"+e.tglName+\" executed by rendererStub at: \"+(new Date).getTime()+\"(number of milliseconds since 1970/01/01)\",\"DEBUG\",\"LP_OFFER\");lpTag.taglets[e.tglName].createInstance(e,o[e.confKey]);delete o[e.confKey]}},u=function(e){e.confKey=e.campaignId+\"_\"+e.engagementId+\"_\"+e.engagementRevision;var n=\"\";\"undefined\"!=typeof g[e.engagementType]&&(n=g[e.engagementType]);e.tglName=n},T=function(){var e=navigator.userAgent;e=e.toLowerCase();var n=/(msie) ([\\w.]+)/,t=n.exec(e);if(null!=t){var a=parseInt(t[2],10);if(7>=a&&-1===e.toLowerCase().indexOf(\"trident\"))return!1}return!0};return{_v:t,_name:a,init:l}}();","name":"rendererStub"},{"code":"\"undefined\"==typeof lpTag.taglets&&(lpTag.taglets={});lpTag.taglets.scraper=function(){var e=\"0.2\",n=\"scraper\",a={CHAT:\"CHAT\",ACCDN:\"acCdnDomain\",LPCDN:\"leCdnDomain\"},t=[],l={scrapeInterval:50},o=function(e){if(e)for(var n=0;n<e.length;n++)\"object\"==typeof e[n]&&(l[e[n].id]=e[n].value)},i=function(){lpTag.taglets.jsonp.issueCall({url:lpTag.protocol+\"//\"+lpTag.csds.getDomain(a.ACCDN)+\"/api/account/\"+lpTag.site+\"/configuration/le-campaigns/zones?fields=id&fields=zoneValue\",callbackName:\"lpZonesStaticCB\",success:function(e){t=e;s()},error:function(){lpTag.log(\"Loading elements list for scraper failed\",\"ERROR\",\"SCRAPER\")}})},s=function(){var e=r();c(e);(\"undefined\"==typeof lpTag.isDom||lpTag.isDom===!1)&&setTimeout(s,l.scrapeInterval)},r=function(){for(var e=[],n=0;n<t.length;n++)if(!t[n].scraped){var a=document.getElementById(t[n].zoneValue);if(null!=a){t[n].scraped=!0;e.push({type:\"pagediv\",divId:t[n].zoneValue})}}return e},c=function(e){if(e.length>0){lpTag.log(\"zones: \"+JSON.stringify(e),\"DEBUG\",\"SCRAPER\");lpTag.sdes.send(e,function(){lpTag.log(\"scraper::send::lpSMT.send success for: \"+e.toString(),\"DEBUG\",\"SCRAPER\")})}},g=function(e){for(var n=0;n<t.length;n++)if(t[n].id===e)return t[n].zoneValue;return null},p=function(){return{_v:e,_name:n,config:l,zones:t}};return{init:o,start:i,getElmId:g,inspect:p}}();","name":"scraper"},{"code":"window.lpTag=window.lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.taglets.lpajax_utils={_name:\"lpajax_utils\",_v:\"0.1\",each:function(e,t,r){if(null!=e){var a=Array.prototype.forEach;if(a&&e.forEach===a)e.forEach(t,r);else if(e.length===+e.length){for(var n=0,o=e.length;o>n;n++)if(n in e&&t.call(r,e[n],n,e)==={})return}else for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)&&t.call(r,e[l],l,e)==={})return}},extend:function(e){this.each(Array.prototype.slice.call(arguments,1),function(t){for(var r in t)e[r]=t[r]});return e},isEmptyObj:function(e){for(var t in e)return!1;return!0},init:function(){}};window.lpTag=window.lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.taglets.lpAjax=lpTag.taglets.lpAjax||function(e){function t(){m=!0}function r(t,r){e.lpTag&&lpTag.log&&lpTag.log(t,r,f)}function a(e,t){if(g[e])r(\"Existing transport: \"+e+\" tried to register\",h.DEBUG);else{g[e]=t;r(\"Added transport: \"+e,h.DEBUG)}}function n(e){m||t();var a=\"unknown\";try{var n=i(e);if(n){n.issueCall(e);return!0}r(\"No Transport found to issueCall\",h.ERROR);c(h.ERROR,e.error,{responseCode:601,error:\"No Transport found to issueCall, request: \"+e.url,body:\"ERROR\"},e.context)}catch(o){n&&n.getName&&(a=n.getName());r(\"Transport - \"+a+\" - unknown exception while issueCall\",h.ERROR);c(h.ERROR,e.error,{responseCode:600,error:\"Transport - \"+a+\" - unknown exception while issueCall: \"+e.url+\" e=\"+o,body:\"ERROR\"},e.context)}}function o(e){m||t();for(var r in e){var a=g[r];a&&a.configure(e[r])}}function l(e){if(e&&\"object\"==typeof e){e.appName=p;e.ts=(new Date).getTime();e.tags&&e.tags.constructor===Array&&e.tags.push({pageId:y});r(e,h.METRICS)}}function i(e){for(var t,r=!1,a=-1,n=0;n<e.transportOrder.length;n++)if(!r){t=u({},e);var o=g[t.transportOrder[n]];if(o&&o.isValidRequest&&o.isValidRequest(t)){r=!0;a=n}}return r?g[t.transportOrder[a]]:null}function s(e,t,r){if(null!=e){var a=Array.prototype.forEach;if(a&&e.forEach===a)e.forEach(t,r);else if(e.length===+e.length){for(var n=0,o=e.length;o>n;n++)if(n in e&&t.call(r,e[n],n,e)==={})return}else for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)&&t.call(r,e[l],l,e)==={})return}}function u(e){s(Array.prototype.slice.call(arguments,1),function(t){for(var r in t)e[r]=t[r]});return e}function c(e,t,a,n){if(\"function\"==typeof t)try{t.call(n||null,a);t=null}catch(o){r(\"runCallback: Exception in execution of callback, type :\"+e+\" e=[\"+o.message+\"]\",h.ERROR)}else r(\"runCallBack: No callback, of type :\"+e,h.INFO)}var d=\"1.1.3\",f=\"lpAjax\",p=\"lpTransporter\",g={},m=!1,h={ERROR:\"ERROR\",DEBUG:\"DEBUG\",INFO:\"INFO\",METRICS:\"METRICS\"},y=\"lpT\"+Math.floor(1e5*Math.random())+\"_\"+Math.floor(1e6*Math.random());return{getVersion:function(){return d},getName:function(){return f},init:t,publishMetrics:l,issueCall:n,configureTransports:o,addTransport:a}}(window);window.lpTag=window.lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.taglets.jsonp=lpTag.taglets.jsonp||function(e){function t(e){if(\"string\"==typeof e){var t=e;e={url:t}}if(!e.url)return!1;e.encoding=e.encoding||j.encoding;e.callback=e.callback||j.callback;e.retries=\"number\"==typeof e.retries?e.retries:j.retries;e.timeout=e.timeout?e.timeout:j.timeout;return e}function r(){return Math.round(99999*Math.random())+\"x\"+Math.round(99999*Math.random())}function a(e,t){return{statusCode:e,responseCode:e,error:t,body:\"ERROR\"}}function n(){return\"scr\"+Math.round(999999999*Math.random())+\"_\"+Math.round(999999999*Math.random())}function o(t){var r=!1;if(L&&t&&t.url){var a=H,n=!1;if(t.callbackName&&\"string\"==typeof t.callbackName){a=t.callbackName.length;(Q[t.callbackName]||e[t.callbackName])&&(n=!0)}var o;try{o=4+(t.callback||j.callback).length+t.url.length+a+l(t.data).length+l(t.query).length}catch(i){F(\"Could not evaluate the length  of the request, e=\"+i,D.ERROR,\"isValidRequest\");r=!1}\"undefined\"!=typeof o&&U>o&&!n&&(r=!0)}return r}function l(e){var t=\"\";if(\"string\"==typeof e)t+=e;else{var r=!0;for(var a in e){var n;\"object\"==typeof e[a]?n=i(e[a]):\"function\"!=typeof e[a]&&(n=e[a]);if(\"undefined\"!=typeof n){r||(t+=\"&\");t+=encodeURIComponent(a)+\"=\"+encodeURIComponent(n);r=!1}}}return t}function i(e){var t;if(\"function\"==typeof Array.prototype.toJSON){var r=Array.prototype.toJSON;delete Array.prototype.toJSON;try{t=JSON.stringify(e)}catch(a){Array.prototype.toJSON=r;throw a}Array.prototype.toJSON=r}else t=JSON.stringify(e);return t}function s(e){var n;if(!o(e)){F(\"URL request was too long or static callback name already exists, url: \"+n,D.ERROR,\"issueCall\");g();e&&e.error&&E(D.ERROR,e.error,a(600,\"Transport - JSONP - unable to run request: \"+e.url),e.context);return!1}e=t(e);e.callbackName&&\"string\"==typeof e.callbackName?e.retries=0:e.callbackName=q+r();n=e.url+(e.url.indexOf(\"?\")>-1?\"&\":\"?\")+e.callback+\"=\"+e.callbackName;e.data&&(n+=\"&\"+l(e.data));e.query&&(n+=\"&\"+l(e.query));e.callUrl=n;if(u(e)){w(e);c()}else F(\"URL request was too long and was not sent, url: \"+n,D.ERROR,\"issueCall\");return!0}function u(t){var r,a=!1,n=new RegExp(/(http{1}s{0,1}?:\\/\\/)([^\\/\\?]+)(\\/?)/gi);r=n.exec(0===t.callUrl.indexOf(\"http\")?t.callUrl:e.location.href);if(r&&r.length>=3&&\"\"!==r[2]){var o=r[2].toLowerCase();t.domainMatch=o;S[o]=S[o]||[];S[o].inFlight=S[o].inFlight||0;S[o].push(t);a=!0;G+=1;F(\"buffered URL: \"+t.callUrl,D.DEBUG,\"lpTag.taglets.jsonp.bufferRequest\")}else F(\"NO MATCH for URL: \"+t.callUrl,D.ERROR,\"lpTag.taglets.jsonp.bufferRequest\");return a}function c(){var e;for(var t in S)if(S.hasOwnProperty(t)){e=S[t];for(var r=!1;!r&&e.inFlight<6&&e.length>0;){var a=e.shift();if(a){F(\"Sent URL: \"+a.callUrl,D.DEBUG,\"lpTag.taglets.jsonp.sendRequests\");a.scriptId=f(a.callUrl,a.encoding,a.callbackName);a.startTime=(new Date).getTime();p(t,a.callbackName,a.timeout);G-=1}else r=!0}}e=null}function d(){clearTimeout(k);k=null;var t=new Date;for(var r in Q)if(Q.hasOwnProperty(r)&&Q[r].launchTime){var n=t-Q[r].launchTime;(Q[r].loadTime||n>Q[r].timeout)&&e[r].apply(null,[a(408,{message:\"Request timed out\",name:\"timeout\"}),!0])}B>0&&(k=setTimeout(d,1e3))}function f(t,r,a){var o=n(),l=document.createElement(\"script\");l.setAttribute(\"type\",\"text/javascript\");l.setAttribute(\"charset\",r);l.onload=function(){Q[a]&&(Q[a].loadTime=new Date);this.onload=this.onerror=this.onreadystatechange=null};e.addEventListener?l.onerror=function(){Q[a]&&(Q[a].loadTime=new Date);this.onload=this.onerror=this.onreadystatechange=null}:l.onreadystatechange=function(){if(this.readyState&&(\"loaded\"===this.readyState||\"complete\"===this.readyState)){Q[a]&&(Q[a].loadTime=new Date);this.onload=this.onerror=this.onreadystatechange=null}};l.setAttribute(\"src\",t);l.setAttribute(\"id\",o);document.getElementsByTagName(\"head\")[0].appendChild(l);k||(k=setTimeout(d,1e3));l=null;return o}function p(e,t,r){S[e].inFlight=S[e].inFlight+1;Q[t]={launchTime:new Date,timeout:r};B+=1;P+=1}function g(){J+=1}function m(e){var t=document.getElementById(e);if(t)try{t.parentNode.removeChild(t);for(var r in t)t.hasOwnProperty(r)&&delete t[r]}catch(a){F(\"error when removing script\",D.ERROR,\"removeScript\")}}function h(e){S[e].inFlight=S[e].inFlight-1;B-=1}function y(e,t,r){O(t.startTime,t.url,r);m(t.scriptId);h(t.domainMatch);N(t.callbackName,r);if(r){if(t.callbackName){t.callbackName=null;delete t.callbackName}v(e,t)}else{b(t);E(\"callback\",t.success,e,t.context);t=null;c()}}function T(){var e;if(lpTag.taglets.lpAjax&&lpTag.taglets.lpAjax.publishMetrics&&_.length>0){e={tags:[{transport:W}],metrics:_};lpTag.taglets.lpAjax.publishMetrics(e);_.length=0}R()}function R(){A&&clearTimeout(A);A=setTimeout(T,j.metricsTimeout)}function O(e,t,r){var a,n;if(e){n=(new Date).getTime();a=n-e;_.push({rd:a,ts:e,url:t,method:\"GET\",statusCode:r?400:200});_.length>=j.metricsCount&&T()}}function v(e,t){V+=1;if(t.retries>0){t.retries=t.retries-1;s(t)}else{b(t);E(D.ERROR,t.error,e||a(408,{id:408,name:\"TIMEOUT\",message:\"Request has timed out on all retries\"}),t.context);t=null;c()}}function b(e){for(var t=[\"callUrl\",\"retries\",\"id\",\"requestTimeout\",\"type\",\"encoding\",\"launchTime\",\"callbackName\",\"domainMatch\",\"startTime\"],r=0;r<t.length;r++)if(e.hasOwnProperty(t[r])){e[t[r]]=null;delete e[t[r]]}}function E(e,t,r,a){if(\"function\"==typeof t)try{t.call(a||null,r);t=null}catch(n){F(\"Exception in execution of callback, type :\"+e+\" e=[\"+n.message+\"]\",D.ERROR,\"runCallback\")}else F(\"No callback, of type :\"+e,D.INFO,\"runCallback\")}function N(t,r){Q[t]=null;delete Q[t];if(r===!0)e[t]=function(){e[t]=null;try{delete e[t]}catch(r){}};else{e[t]=null;try{delete e[t]}catch(a){}}}function w(t){if(Q[t.callbackName]){g();v(a(409,{message:\"This callbackName is already in a pending request and can't be serviced\",id:409,name:\"CONFLICT\"}),t)}else e[t.callbackName]=function(e,r){y(e,t,r)}}function F(t,r,a){(M===!0||r===D.ERROR)&&e.lpTag&&lpTag.log&&lpTag.log(t,r,a)}function C(e){if(e){for(var t in e)j.hasOwnProperty(t)&&e.hasOwnProperty(t)&&(j[t]=e[t]);M=\"boolean\"==typeof e.debugMode?e.debugMode:M}x()}function x(){if(lpTag&&lpTag.taglets&&lpTag.taglets.lpAjax)try{lpTag.taglets.lpAjax.addTransport(W,z)}catch(e){}R()}function I(){var e={};for(var t in j)j.hasOwnProperty(t)&&(e[t]=j[t]);return e}var k,A,j={callback:\"cb\",encoding:\"UTF-8\",timeout:1e4,retries:2,metricsCount:100,metricsTimeout:6e4},D={ERROR:\"ERROR\",DEBUG:\"DEBUG\",INFO:\"INFO\"},L=!0,M=!1,U=2083,q=\"lpCb\",S={},P=0,G=0,B=0,J=0,V=0,_=[],Q={},H=r().length,K=\"1.1.7\",W=\"jsonp\",z={init:x,configure:C,issueCall:s,isValidRequest:o,getVersion:function(){return K},getName:function(){return W},getDefaults:I,inspect:function(){return{name:W,version:K,callsMade:P,errorsFound:V,pending:B,buffered:G,refused:J,defaults:I()}}};x();return z}(window);window.lpTag=window.lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.taglets.postmessage=lpTag.taglets.postmessage||function(e){function t(e,t,r){e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent(\"on\"+t,r)}function r(e,t){return{callId:e,responseType:t.responseType,responseCode:t.responseCode,error:{message:t.message,id:t.responseCode,name:t.name}}}function a(e,t,r){e.removeEventListener?e.removeEventListener(t,r,!1):e.detachEvent&&e.detachEvent(\"on\"+t,r)}function n(){if(document.body){ue=!0;o()}else setTimeout(n,5)}function o(){for(;ce.length>0;)try{ce.shift().call(null)}catch(e){W(\"Unable to execute queued callbacks for window interactive state: \"+e,de.ERROR,\"attachPendingIFrames\")}}function l(e){return e+\"_\"+Math.floor(1e5*Math.random())+\"_\"+Math.floor(1e5*Math.random())}function i(e){var t,r=new RegExp(/(http{1}s{0,1}?:\\/\\/)([^\\/\\?]+)(\\/?)/gi),a=null;if(0!==e.indexOf(\"http\"))return location.protocol+\"//\"+location.host;t=r.exec(e);t&&t.length>=3&&\"\"!==t[2]&&(a=t[1].toLowerCase()+t[2].toLowerCase());return a}function s(e,t){var r,a,n=!1;if(!e||!e.url||\"string\"!=typeof e.url){W(\"iFrame configuration empty or missing url parameter\",de.ERROR,\"queueFrame\");return n}r=i(e.url);a=0===e.url.toLowerCase().indexOf(\"https\");if(!(re[r]||se[r]||t&&a!==t)){se[r]=e;n=!0}return n}function u(e){var t=i(e.url);if(re[t])return m(t,e.callback||e.success,e.context);var r=l(\"fr\");re[t]={elem:h(r),url:e.url,validated:Te.PENDING,defaults:e.defaults||{},delayLoad:isNaN(e.delayLoad)?0:e.delayLoad,requestCount:0,success:e.callback||e.success,error:e.error,maxReloadRetries:e.maxReloadRetries||3,reloadInterval:1e3*e.reloadInterval||3e4};setTimeout(function(){c(e.url,t)},re[t].delayLoad);W(\"iFrame Queued to load \"+t,de.INFO,\"addFrame\");return Te.PENDING}function c(e,t){ue?d(e,t):ce.push(function(){d(e,t)})}function d(e,r){re[r].loadCallback=re[r].loadCallback||f(r);P(re[r].elem,e);t(re[r].elem,\"load\",re[r].loadCallback);re[r].iFrameOnloadTimeout=setTimeout(re[r].loadCallback,5e3);re[r].attachTime=(new Date).getTime();document.body.appendChild(re[r].elem)}function f(e){return function(t){if(re[e].iFrameOnloadTimeout){clearTimeout(re[e].iFrameOnloadTimeout);delete re[e].iFrameOnloadTimeout}re[e].loadTime=(new Date).getTime()-re[e].attachTime;R(e,t)}}function p(e){oe+=1;ie+=1;re[e].requestCount=re[e].requestCount+1}function g(e,t){ne[e]=ne[e]||[];ne[e].push(t);return!0}function m(e,t,r){var a=V(e);Q(t,r,a);return re[e].validated}function h(e){var t=document.createElement(\"IFRAME\");t.setAttribute(\"id\",e);t.setAttribute(\"name\",e);t.setAttribute(\"tabindex\",\"-1\");t.setAttribute(\"aria-hidden\",\"true\");t.setAttribute(\"title\",\"\");t.setAttribute(\"role\",\"presentation\");t.style.width=\"0px\";t.style.height=\"0px\";t.style.position=\"absolute\";t.style.top=\"-1000px\";t.style.left=\"-1000px\";return t}function y(e,t,r,a,n,o){var l=!1;if(e&&t&&\"function\"==typeof t){ae[e]={success:t,error:r,progress:a,ctx:n,launchTime:new Date,timeout:isNaN(o)?ye.timeout:o+1e3};l=!0}return l}function T(e){if(ae[e]){ae[e]=null;delete ae[e];return!0}return!1}function R(e,t){W(\"onLoad validation called \"+e,de.INFO,\"validateFrame\");var r=function(t){O(t,e)};t&&t.error?O(t,e):setTimeout(function(){x({domain:e,success:r,error:r,validation:!0,timeout:100,retries:-1,defaults:re[e].defaults})},10);return!0}function O(e,t){var r,a=re[t];W(\"running validation of domain \"+t,de.INFO,\"validateFrameCallback\");if(a){re[t].validated=e&&e.error?Te.FAILED:Te.VALIDATED;r=re[t].validated===Te.VALIDATED;r?v(t,e):re[t].reloadObj&&re[t].reloadObj.retriesLeft>0?E(t):b(t)}a=null;return r}function v(e,t){var r;W(\"FrameLoaded \"+e,de.INFO,\"runFrameValidated\");r=L(me);for(var a in t)t.hasOwnProperty(a)&&(r[a]=t[a]);Q(re[e].success,re[e].context,r);B(e);N(e,!0)}function b(e){W(\"iFrame is a teapot \"+e,de.ERROR,\"runFrameFailedToLoad\");if(re[e].error){var t=r(0,he);t.domain=e;Q(re[e].error,re[e].context,t)}w(e);N(e,!1)}function E(e){W(\"Retry loading domain: \"+e,\"info\",\"runReloadAttempt\");N(e,!1);U(e)}function N(e,t){W(\"Running buffer queue : \"+e+\" loaded: \"+t,de.INFO,\"runQueuedRequests\");if(ne[e]&&ne[e].length>0){do{var r=ne[e].shift();t?x(r):Q(r.error,r.context,{responseCode:600,error:\"Transport - postmessage - unable to run request: \"+e,body:\"ERROR\"})}while(ne[e].length>0);ne[e]=null;delete ne[e]}}function w(e){W(\"Cleaning up failed iFrame: \"+e,de.INFO,\"cleanupIFrame\");if(re[e]){a(re[e].elem,\"load\",re[e].loadCallback);re[e].elem.parentNode.removeChild(re[e].elem);var t=L(he);t.domain=e;t.url=re[e].url;Q(re[e].error,re[e].context,t);re[e]=null;delete re[e]}}function F(e,t,r){W(\"Frame not found for domain: \"+e,de.ERROR,\"noFrameFound\");Q(t,{responseCode:600,error:\"Transport - postmessage - unable to run request: \"+e,body:\"ERROR\"},r);return!1}function C(t){var r=!1;if(e.postMessage&&e.JSON&&t&&t.success&&(t.domain&&t.validation||t.url)){t.domain=t.domain||i(t.url);(re[t.domain]||se[t.domain])&&(r=!0)}return r}function x(e){var t=!1;if(te&&C(e))if(re[e.domain])if(re[e.domain].validated!==Te.PENDING||e.validation){t=I(e);t?p(e.domain):ae[e.callId].timeout=0}else t=g(e.domain,e);else{W(\"Adding iFrame to DOM - first request: \"+e.domain,de.INFO,\"issueCall\");t=g(e.domain,e);u(se[e.domain]);delete se[e.domain]}else t=F(e.domain,e.error,e.context);return t}function I(e){var t,r=!1;e=A(e);t=L(e);try{t=k(t)}catch(a){W(\"Error trying to stringify message\",de.ERROR,\"sendMessageToFrame\");return!1}W(\"sending msg to domain \"+e.domain,de.DEBUG,\"sendMessageToFrame\");var n;isNaN(e.timeout)||isNaN(e.retries)||(n=e.timeout*(e.retries+1)+2e3);y(e.callId,e.success,e.error,e.progress,e.context,n);try{r=j(e.domain,t);Z=setTimeout(D,1e3)}catch(a){W(\"Error trying to send message: \"+a,de.ERROR,\"sendMessageToFrame\");r=!1}return r}function k(e){var t;if(\"function\"==typeof Array.prototype.toJSON){var r=Array.prototype.toJSON;delete Array.prototype.toJSON;try{t=JSON.stringify(e)}catch(a){Array.prototype.toJSON=r;throw a}Array.prototype.toJSON=r}else t=JSON.stringify(e);return t}function A(t){var r=re[t.domain]&&re[t.domain].defaults;t.callId=l(\"call\");t.returnDomain=fe;\"undefined\"==typeof t.timeout&&(t.timeout=r&&r.timeout||ye.timeout);\"undefined\"==typeof t.retries&&(t.retries=r&&\"undefined\"!=typeof r.retries?r.retries:ye.retries);t.progress&&(t.fireProgress=!0);t.headers=t.headers||{};t.headers[\"LP-URL\"]=e.location.href;return t}function j(e,t){var r=!1;try{re[e].elem.contentWindow.postMessage(t,e);r=!0}catch(a){W(\"Error trying to send message: \"+a,de.ERROR,\"postTheMessage\")}return r}function D(){Z&&clearTimeout(Z);Z=null;var e=new Date,t=0,a=[];for(var n in ae)if(ae.hasOwnProperty(n)&&ae[n].launchTime){var o=e-ae[n].launchTime;o>ae[n].timeout?a.push(n):t+=1}if(a.length){W(\"Checking errors found \"+a.length+\" timeout callbacks to call\",de.DEBUG,\"checkForErrors\");for(var l=0;l<a.length;l++)M(r(a[l],ge))}t>0&&(Z=setTimeout(D,1e3));return!0}function L(e){var t={};if(e.constructor===Object)for(var r in e)try{e.hasOwnProperty(r)&&\"function\"!=typeof e[r]&&(t[r]=e[r])}catch(a){W(\"Error creating request object data clone: \"+a,de.ERROR,\"cloneSimpleObj\")}else e.constructor===Array?t=e.slice(0)||[]:\"function\"!=typeof e&&(t=e);return t}function M(e,t){var r,a=ae[e.callId],n=e.responseType,o=!1;if(e.callId&&ae[e.callId]||e.responseType===pe.reloading||e.responseType===pe.stats)try{switch(n){case pe.completed:r=a.success;o=!0;break;case pe.error:r=a.error;o=!0;le+=1;break;case pe.progress:r=a.progress;break;case pe.reloading:e=t;r=U;break;case pe.stats:r=Y;e=e.rawData}if(o){T(e.callId);J(e);ie=ie>=0?0:ie-1}r&&\"function\"==typeof r&&Q(r,a&&a.ctx||null,e);r=null;a=null}catch(l){W(\"Error in executing callback: \"+l,de.ERROR,\"executeMessageCallback\");return!1}return!0}function U(e){W(\"Got reload request from \"+e,de.INFO,\"handleReload\");re[e].validated=Te.PENDING;if(!re[e].reloadObj){W(\"Creating reloadObj\"+e,de.DEBUG,\"handleReload\");re[e].reloadObj=G(e)}q(e)}function q(e){W(\"Reload try for domain \"+e+\" ,retries left \"+re[e].reloadObj.retriesLeft,de.INFO,\"reloadIFrame\");re[e].reloadObj.retriesLeft=re[e].reloadObj.retriesLeft-1;re[e].reloadObj.setLocationTimeout&&clearTimeout(re[e].reloadObj.setLocationTimeout);if(re[e].reloadObj.retry)re[e].reloadObj.setLocationTimeout=setTimeout(S(e),re[e].reloadInterval);else{re[e].reloadObj.retry=!0;S(e)()}}function S(e){return function(){re[e].iFrameOnloadTimeout=setTimeout(function(){R(e,{error:{code:404,message:\"Frame did not trigger load\"}})},5e3);P(re[e].elem,re[e].url)}}function P(e,t){t+=t.indexOf(\"?\")>0?\"&bust=\":\"?bust=\";t+=(new Date).getTime();t+=\"&loc=\"+location.protocol+\"//\"+location.host;W(\"Setting iFrame to URL: \"+t,de.INFO,\"setIFrameLocation\");e.setAttribute(\"src\",t)}function G(e){W(\"Creating reload object \"+e,de.INFO,\"createReloadObject\");var t=re[e].maxReloadRetries;return{retriesLeft:t}}function B(e){W(\"Cleaning up reload object for this instance\"+e,de.INFO,\"cleanUpReloadObject\");if(re[e].reloadObj){re[e].reloadObj.setLocationTimeout&&clearTimeout(re[e].reloadObj.setLocationTimeout);re[e].reloadObj=null;delete re[e].reloadObj}}function J(e){for(var t=[\"callId\",\"responseType\"],r=0;r<t.length;r++){e[t[r]]=null;delete e[t[r]]}}function V(e){return e&&re[e]?{url:re[e].url,validated:re[e].validated,requestCount:re[e].requestCount,defaults:L(re[e].defaults),started:re[e].validated===Te.VALIDATED}:{}}function _(){var e={};for(var t in re)re.hasOwnProperty(t)&&(e[t]=V(t));return e}function Q(e,t,r){if(e&&\"function\"==typeof e)try{e.call(t||null,r)}catch(a){W(\"Error in executing callback: \"+a,de.ERROR,\"runCallback\")}}function H(e){var t,r;try{r=e.origin;if(!re[r])return;t=K(e.data);t.body=K(t.body)}catch(a){t=null;W(\"Error in handling message from frame:\"+a+\" origin: \"+r,de.ERROR,\"handleMessage\")}t&&\"object\"==typeof t&&M(t,r)}function K(e){var t;if(\"string\"==typeof e)try{t=JSON.parse(e)}catch(r){W(\"Error in parsing string: \"+e,de.DEBUG,\"parseJSONString\")}else t=e;return t}function W(t,r,a){e.lpTag&&lpTag.log&&lpTag.log(t,r,a)}function z(e){var t=0===location.protocol.indexOf(\"https\");if(e){if(e.frames){e.frames=e.frames.constructor===Array?e.frames:[e.frames];for(var r=0;r<e.frames.length;r++)s(e.frames[r],t)}if(e.defaults)for(var a in e.defaults)ye.hasOwnProperty(a)&&e.defaults.hasOwnProperty(a)&&(ye[a]=e.defaults[a])}te=!0}function X(){if(lpTag&&lpTag.taglets&&lpTag.taglets.lpAjax)try{lpTag.taglets.lpAjax.addTransport(ee,Re)}catch(e){}}function Y(e){if(lpTag.taglets.lpAjax&&lpTag.taglets.lpAjax.publishMetrics){e.tags&&e.tags.constructor===Array&&e.tags.push({transport:ee});lpTag.taglets.lpAjax.publishMetrics(e)}}var Z,$=\"1.1.8\",ee=\"postmessage\",te=!0,re={},ae={},ne={},oe=0,le=0,ie=0,se={},ue=!1,ce=[],de={DEBUG:\"DEBUG\",INFO:\"INFO\",ERROR:\"ERROR\"},fe=i(document.location.href),pe={progress:\"progressLoad\",completed:\"completeLoad\",error:\"errorLoad\",reloading:\"reloading\",stats:\"statData\"},ge={responseType:pe.error,responseCode:404,message:\"Request timed out on parent postMessage layer\",name:\"TIMEOUT\"},me={responseType:pe.success,responseCode:200,message:\"iFrame has successfully loaded\",name:\"OK\"},he={responseType:pe.error,responseCode:418,message:\"This iFrame is a teapot, not very useful for communication but lovely for earl grey\",name:\"TEAPOT\"},ye={timeout:6e4,metricsCount:1e3};n();t(e,\"message\",H);var Te={VALIDATED:\"valid\",PENDING:\"pending\",FAILED:\"failed\"},Re={init:X,issueCall:x,isValidRequest:C,getVersion:function(){return $},getName:function(){return ee},configure:z,getFrameData:V,inspect:function(){return{name:ee,version:$,callsMade:oe,errorsFound:le,pending:ie,defaults:ye,iFrameList:L(se),activeFrames:_()}}};X();return Re}(window);window.lpTag=lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.taglets.lpTransporter=lpTag.taglets.lpTransporter||function(){function e(e,t){window.lpTag&&lpTag.log&&lpTag.log(e,t,r)}function t(){for(var t=0;t<n.taglets.length;t++){var r=lpTag.taglets[n.taglets[t]];try{r.init();e(\"Called init on taglet: \"+n.taglets[t],\"DEBUG\")}catch(a){e(\"Error init taglet:\"+n.taglets[t]+\"  e=\"+a,\"ERROR\")}}for(var o=0;t<n.taglets.length;o++){var l=lpTag.taglets[n.taglets[o]];try{\"function\"==typeof l.start&&l.start();e(\"Called start on taglet: \"+n.taglets[o],\"DEBUG\")}catch(a){e(\"Error start taglet: \"+n.taglets[o]+\"e= \"+a,\"ERROR\")}}}var r=\"lpTransporter\",a=\"1.1.0\",n={taglets:[\"lpAjax\",\"lpajax_utils\",\"jsonp\",\"postmessage\"]};return{v:a,name:r,init:t}}();","name":"lpTransporter"},{"code":"window.lpTag=lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.taglets.jsLoader=lpTag.taglets.jsLoader||function(e){function t(e){var t=[],n=[],a=!1;for(var r in e)if(\"string\"==typeof e[r]||e[r].url)if(e[r].dependency){var l=o(e,e[r].dependency);l.length>0&&(t=t.concat(l))}else\"string\"==typeof e[r]||\"string\"==typeof e[r].url?a=!0:n.push(e[r]);else\"string\"!=typeof e[r]&&n.push(r);return{missingKeys:t,invalidUrls:n,requestValid:0===t.length&&0===n.length&&a}}function n(){lpTag.log(\"JSLoader was initialised\",\"DEBUG\",v)}function a(e){T+=1;var n=\"\";if(e&&e.loadObj){var a=t(e.loadObj);if(a.requestValid){e.startTime=new Date;for(var r in e.loadObj)if(e.loadObj[r]!==!0&&!e.loadObj[r].dependency){n=e.loadObj[r].url||e.loadObj[r];f(n,e.context,i(r,e))}}else j(e.error,e.context||null,a)}}function r(){return{version:S,name:v,errors:m,downloads:E,configsCount:T}}function o(e,t){var n=[];t=t.constructor===Array?t:[t];for(var a=0;a<t.length;a++)e[t[a]]||n.push(t[a]);return n}function l(e,t,n){m+=1;n.loadError=n.loadError||[];n.loadError.push({key:e,url:t});return!0}function d(e,t,n){E+=1;if(\"object\"==typeof t.loadObj[e]){var a=t.loadObj[e];j(n&&a.error?a.error:a.success,a.context||null,n?{error:!0,data:a}:{data:a})}t.loadObj[e]=!0}function c(e){var t=!0;for(var n in e.loadObj)if(e.loadObj[n]!==!0){t=!1;break}return t}function i(e,t){return function(n,a){d(e,t,a);a&&l(e,n,t);u(e,t);c(t)&&s(t,!!t.loadError)}}function s(e,t){e.endTime=new Date;setTimeout(function(){j(t?e.error:e.success,e.context,t?e.loadError:e);e=null},10)}function u(e,t){var n;for(var a in t.loadObj)if(\"object\"==typeof t.loadObj[a]){t.loadObj[a].dependency=t.loadObj[a].dependency&&t.loadObj[a].dependency.constructor===Array?t.loadObj[a].dependency:[t.loadObj[a].dependency];n=[];for(var r=0;r<t.loadObj[a].dependency.length;r++)t.loadObj[a].dependency[r]!==e&&n.push(t.loadObj[a].dependency[r]);if(n.length!==t.loadObj[a].dependency.length){t.loadObj[a].dependency=n;0===n.length&&f(t.loadObj[a].url,t.loadObj[a].context,i(a,t))}}}function f(e,t,n){if(A[e])A[e].state===R.LOADING?O(n,A[e].callbackQueue):A[e].state===R.SUCCESS&&j(n,t,[e]);else{A[e]=p(R.LOADING);O(n,A[e].callbackQueue);b(e,{success:function(){A[e].state=R.SUCCESS;g.call(this,e,t,A[e].callbackQueue)},error:function(){A[e].state=R.ERROR;y.call(this,e,t,A[e].callbackQueue)}})}}function p(e,t){return{state:e,callbackQueue:t||[]}}function b(e,t){var n=document.createElement(\"script\");n.setAttribute(\"type\",\"text/javascript\");n.setAttribute(\"charset\",\"UTF-8\");n.onreadystatechange=n.onload=t.success;n.onerror=t.error;n.setAttribute(\"src\",e);(document.head||document.getElementsByTagName(\"head\")[0]).appendChild(n)}function g(t,n,a){var r=!1;this.readyState?e.opera||\"loaded\"!==this.readyState&&\"complete\"!==this.readyState||(r=!0):r=!0;if(r){h(t,n,a,!1);this.onerror=this.onload=this.onreadystatechange=null}}function y(e,t,n){h(e,t,n,!0);this.onerror=this.onload=this.onreadystatechange=null}function O(e,t){t&&-1===t.indexOf(e)&&t.push(e)}function h(e,t,n,a){for(var r;n.length;){r=n.pop();j(r,t,e,a)}}function j(t,n){n=n||e;if(\"function\"==typeof t){var a=Array.prototype.slice.call(arguments,2);try{return t.apply(n,a)}catch(r){lpTag.log(\"Failed to execute callback exc= \"+r.message,\"ERROR\",v)}}}var v=\"jsLoader\",S=\"1.0.1\",E=0,m=0,T=0,R={LOADING:\"LOADING\",SUCCESS:\"SUCCESS\",ERROR:\"ERROR\"},A={};return{v:S,init:n,loadJS:a,validateLoadObj:t,inspect:r}}(window);","name":"jsLoader"},{"code":"window.lpTag=lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.taglets.lp_version_detector=function(){function _log(n,e){window.lpTag&&lpTag.log&&lpTag.log(n,e,_name)}function _error(n){_log(n,\"ERROR\")}function _info(n){_log(n,\"INFO\")}function _convertConfig(conf,_config){if(\"undefined\"!=typeof _config){if(conf)for(var i=0;i<conf.length;i++){var val=conf[i].value;if(\"string\"==typeof val&&\"\"!=val)if(\"true\"===val)val=!0;else if(\"false\"===val)val=!1;else if(\"[\"==val.charAt(0)||\"{\"==val.charAt(0))try{val=\"undefined\"!=typeof JSON&&JSON.parse?JSON.parse(val):eval(\"(\"+val+\")\")}catch(e){lpTag.log(\"unable to parse JSON:\"+e,\"ERROR\",_name)}_config[conf[i].id]=val}}else lpTag.log(\"_config is passed as undefined\",\"ERROR\",_name)}function init(n){_convertConfig(n,_conf)}function start(){_conf.sendUDE&&_sendUDE({name:\"lpTagVer\",value:lpTag._v});_conf.sendSDE&&_sendSDE({type:\"lpTagVer\",version:lpTag._v})}function _sendSDE(n){window.lpTag.sdes=window.lpTag.sdes||[];lpTag.sdes.push(n)}function _sendUDE(n){window.lpMTagConfig=window.lpMTagConfig||{};window.lpMTagConfig.pageVar=window.lpMTagConfig.pageVar||[];try{n.value=\"\"+n.value;var e=encodeURIComponent(n.name)+\"=\"+encodeURIComponent(n.value);lpMTagConfig.pageVar.push(e);_info(\"Added variable scope:page name:\"+n.name+\" value:\"+n.value)}catch(a){_error(\"Exception in adding variable e=\"+a)}}var _name=\"lp_version_detector\",_v=\"1.0.1\",_conf={sendSDE:!1,sendUDE:!0};return{getVersion:function(){return _v},getName:function(){return _name},init:init,start:start,inspect:function(){return{conf:_conf}}}}();","name":"lp_version_detector"},{"code":"window.lpTag=window.lpTag||{};window.lpTag.taglets=window.lpTag.taglets||{};lpTag.taglets.lpSecureStorage=lpTag.taglets.lpSecureStorage||function(e){function t(){}function n(e){return e&&Ne[e]?Ne[e]:Ne}function o(e){if(e&&e.value){e.value=null;delete e.value}e.type=he.GET;u(e)}function r(e){if(e&&-1===e.expires)i(e);else{e.type=he.SET;u(e)}}function i(e){e&&(e.expires=-1);e.type=he.REMOVE;u(e)}function a(e){e&&e.debug===!0&&(de=!0);for(var t in e)if(\"object\"==typeof e[t]&&e.hasOwnProperty(t)&&e[t].site)if(e[t].url&&0===e[t].url.indexOf(\"http\")){Y(\"Configuring url \"+e[t].url);G(e[t].url,e[t].site,e[t],e[t].chosenStorageHandler)}else e[t].url===ne&&D(e[t])}function u(e){var t=e.domain===ne;if(t)c(e);else{var n=V(e.domain);ke.get(n)?m(e,n):g(e,n)}}function s(){lpTag.StorageMethods&&!$&&($=new lpTag.StorageMethods);return $?$.isStorageEnabled():!1}function c(e){var t,n;if(s()){t=\"\"+e.site+e.key;switch(e.type){case he.GET:x(e.success,l(t,e),e.key);break;case he.SET:p(t,e);x(e.success,e.value,e.key);break;case he.REMOVE:n={error:\"Object not found.\"};d(t,e)&&(n=void 0);x(e.success,n,e.key)}}else x(e.success,{error:\"SessionStorage is not active\",code:500},e.key)}function f(e){var t=$.getSessionData(e);try{t=JSON.parse(t)}catch(n){}return\"\"!==t?t:null}function l(e,t){var n=f(e);t.appName&&null!==n&&\"object\"==typeof n&&(n=n[t.appName]);return\"\"!==n?n:null}function p(e,t){var n=f(e);null===n&&(n={});if(\"object\"==typeof n){n[t.appName]=t.value;return $.setSessionData(e,A(n))}return!1}function d(e,t){var n=!1,o=!1,r=f(e);if(null!==r&&\"object\"==typeof r&&r.hasOwnProperty(t.appName)){r[t.appName]=null;delete r[t.appName];for(var i in r)if(r.hasOwnProperty(i)){o=!0;break}n=!0}return n&&o?$.setSessionData(e,A(r)):n?$.removeSessionData(e):!1}function g(e,t){if(e&&(e.success||e.error)&&e.key&&e.appName&&e.domain&&e.site){delete e.type;if(oe)if(ae[t])if(!Ne[t]||Ne[t]&&!Ne[t].error){X(e);L(e);Y(\"Made request for key: \"+e.key+\" appName: \"+e.appName)}else{x(e.error||e.success,null,e.key);Y(\"No Storage Selected, Blocked request for key: \"+e.key+\" appName: \"+e.appName)}else{G(e.domain,e.site,e.initialStorageType,e.chosenStorageHandler);ue[t].push(e)}else re.push(function(){u(e)})}}function m(e,t){le[t]=\"undefined\"==typeof le[t]?[]:le[t];le[t].push(e)}function y(){var e,t=(new Date).getTime(),n=!1;if(Z){clearTimeout(Z);Z=null}for(var o in se)if(se.hasOwnProperty(o)){e=0;e=t-se[o].startTime;if(e>=me){Q(\"iFrame not responding in time to requests, domain: \"+se[o].domain);w(o,se[o].key,null,!0)}else n=!0}S(n)}function S(e){e&&!Z&&(Z=setTimeout(y,ye))}function v(e,t){ce[e]=t?\"undefined\"==typeof ce[e]?1:ce[e]+1:0;Y(\"Domain \"+e+\" error count: \"+ce[e],\"_manageErrorState\");ce[e]>Se&&J(le[e],e,\"iFrame not responding in time to requests\")}function h(e){if(ae[e]&&ae[e].parentNode){ae[e].parentNode.removeChild(ae[e]);ae[e]=null;delete ae[e];ce[e]=0;Q(\"Removed iFrame for domain\",\"_removeIFrame\")}}function T(){document.body?K():setTimeout(T,0)}function N(e){e&&e.data&&fe[e.origin]&&E(e.data,e.origin)}function O(e){se[e]=null;delete se[e]}function E(e,t){var n,o,r,i=b(e);if(i){n=i.id;o=i.key;if(Ee===o)k(i,t);else{r=\"undefined\"!=typeof i.value?i.value:i.error;w(n,i.key,r,!!i.error);Y(\"Got result for key: \"+i.key+\" appName: \"+i.appName)}}}function k(e,t){Ne[t]=e.value;Y(\"Got storage type: \"+e.value+\" for origin: \"+t+\" appName: \"+e.appName);Oe[t]&&x(Oe[t],e.value)}function w(e,t,n,o){var r,i=R(e);if(i){r=V(i.domain);I(i,n,t,o)}e&&O(e);ke.set(!1,r);v(r,o);le[r]&&le[r].length>0&&u(le[r].shift())}function R(e){return e&&se[e]?se[e]:void 0}function I(e,t,n,o){o?x(e.error,t,n):x(e.success,t,n)}function b(e){try{e=decodeURIComponent(e);e=JSON.parse(e)}catch(t){}return e}function A(e){var t,n;if(\"function\"==typeof Array.prototype.toJSON){n=Array.prototype.toJSON;delete Array.prototype.toJSON;try{t=JSON.stringify(e)}catch(o){Array.prototype.toJSON=n;throw o}Array.prototype.toJSON=n}else t=JSON.stringify(e);return t}function x(e,t,n){if(\"function\"==typeof e)try{e(t,n)}catch(o){}}function C(t,n,o){e.addEventListener?t.addEventListener(n,o,!1):t.attachEvent(\"on\"+n,o)}function D(e){var t={value:\"NONE\"};Oe[ne]=e.chosenStorageHandler;if(s()){ae[ne]=!0;t={value:Te.STATICSESSIONSTORAGE}}k(t,ne)}function G(e,t,n,o){var r,i=V(e);if(!ae[i]&&!ue[i]){Y(\"Attaching iFrame: \"+e+\" domain: \"+i);r=F();fe[i]=!0;r.setAttribute(\"src\",P(e,t,n));ue[i]=[];o&&(Oe[i]=o);oe?M(i,r)():ie.push(M(i,r))}return r}function F(){var e=document.createElement(\"iframe\"),t=e.style,n=\"lpSS_\"+Math.floor(9e10*Math.random()),o={tabIndex:\"-1\",\"aria-hidden\":\"true\",role:\"presentation\",title:\"\",name:n,id:n};t.width=\"0px\";t.height=\"0px\";t.position=\"absolute\";t.top=\"-1000px\";t.left=\"-1000px\";for(var r in o)o.hasOwnProperty(r)&&e.setAttribute(r,o[r]);return e}function M(e,t){return function(){var n=setTimeout(function(){J(ue[e],e,\"unable to load iFrame for key\")},ge);C(t,\"load\",function(){B(t,e,n)});document.body.appendChild(t)}}function J(e,t,n){for(;e.length>0;){var o=e.shift();o.error&&setTimeout(U(o.error,n||{error:n,key:o.key},o.key),0)}h(t)}function U(e,t,n){return function(){x(e,t,n)}}function B(e,t,n){n&&clearTimeout(n);ae[t]=e;Y(\"Frame loaded \"+t+\" running pending request for frame\");if(ue[t]){for(;ue[t].length>0;)u(ue[t].shift());ue[t]=null;delete ue[t]}}function P(e,t,n){var o,r,i;if(e&&\"string\"==typeof e){o=e.lastIndexOf(\"/\");if(o>8)e=e.substr(0,o);else{r=e.indexOf(\"?\");r>0&&(e=e.substr(0,r))}i=0<location.port.length?\":\"+location.port:\"\";e+=\"/\"+(de?\"storage.html\":\"storage.min.html\")+\"?loc=\"+encodeURIComponent(location.protocol+\"//\"+location.hostname+i)+\"&site=\"+encodeURIComponent(t)+(n.initialStorageType?\"&ist=\"+encodeURIComponent(n.initialStorageType):\"\")+(n.force?\"&force=1\":\"\")}return e}function V(e){var t=new RegExp(/(http{1}s{0,1}?:\\/\\/){0,1}([^\\/\\?]+)(\\/?)/gi),n=t.exec(e),o=null;n&&n.length>=3&&\"\"!==n[2]&&(o=n[1]+n[2].toLowerCase());return o}function j(e){var t={};t.id=e.id;t.key=e.key;t.site=e.site;t.appName=e.appName||\"*\";isNaN(e.expires)||(t.expires=e.expires);if(\"undefined\"!=typeof e.value){t.value=e.value;t.locations=q(e.locations)}return t}function q(e){e=e?e.constructor===Array?e:[e]:[];e.push(document.location.hostname);return e}function L(e){var t,n=V(e.domain);if(ae[n]){e.startTime=(new Date).getTime();t=j(e);ke.set(!0,n);H(t,n);S(!0)}}function H(e,t){ae[t]&&ae[t].contentWindow.postMessage(_(e),t)}function _(e){try{e=A(e);e=encodeURIComponent(e)}catch(t){}return e}function K(){oe=!0;for(;ie.length>0;)try{ie.shift()()}catch(e){}for(;re.length>0;)try{re.shift()()}catch(e){}}function W(){pe++;pe>2e4&&(pe=0);return\"k\"+pe+(new Date).getTime()+parseInt(100*Math.random(),10)}function X(e,t){e.id=t?t:W();\"undefined\"!=typeof e.value&&(e.type=\"set\");se[e.id]=e}function z(t,n){e.lpTag&&lpTag.log&&lpTag.log(t,n,ee)}function Q(e){z(e,ve.ERROR)}function Y(e){z(e,ve.DEBUG)}var Z,$,ee=\"lpSecureStorage\",te=\"1.10.0\",ne=\"STATICSESSIONSTORAGE\",oe=!1,re=[],ie=[],ae={},ue={},se={},ce={},fe={},le={},pe=0,de=!1,ge=7e3,me=5e3,ye=1e3,Se=10,ve={ERROR:\"ERROR\",DEBUG:\"DEBUG\",INFO:\"INFO\"},he={SET:\"set\",GET:\"get\",REMOVE:\"remove\"},Te={LOCALSTORAGE:\"localStorage\",SESSIONSTORAGE:\"sessionStorage\",INDEXEDDB:\"indexedDB\",COOKIE:\"secureSessionCookie\",STATICSESSIONSTORAGE:ne},Ne={},Oe={},Ee=\"SecureStorageClient/storageType\",ke={set:function(e,t){t&&(this[t]=e)},get:function(e){return e?this[e]:void 0}};C(e,\"message\",N);T();return{storageTypes:Te,getStorageType:n,getValue:o,setValue:r,removeValue:i,configure:a,sessionStorageStaticDomain:ne,v:te,name:ee,init:t,inspect:function(){var e={};for(var t in ae)ae.hasOwnProperty(t)&&(e[t]={url:t,storageType:Ne[t]});return{name:ee,version:te,configuredFrames:e}}}}(window);","name":"lpSecureStorage"},{"code":"window.lpTag=lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.taglets.lp_json_support=lpTag.taglets.lp_json_support||function(){function init(){window.JSON;window.JSON||(window.JSON={});!function(){\"use strict\";function f(e){return 10>e?\"0\"+e:e}function quote(e){escapable.lastIndex=0;return escapable.test(e)?'\"'+e.replace(escapable,function(e){var t=meta[e];return\"string\"==typeof t?t:\"\\\\u\"+(\"0000\"+e.charCodeAt(0).toString(16)).slice(-4)})+'\"':'\"'+e+'\"'}function str(e,t){var n,i,r,o,s,a=gap,l=t[e];l&&\"object\"==typeof l&&\"function\"==typeof l.toJSON&&(l=l.toJSON(e));\"function\"==typeof rep&&(l=rep.call(t,e,l));switch(typeof l){case\"string\":return quote(l);case\"number\":return isFinite(l)?String(l):\"null\";case\"boolean\":case\"null\":return String(l);case\"object\":if(!l)return\"null\";gap+=indent;s=[];if(\"[object Array]\"===Object.prototype.toString.apply(l)){o=l.length;for(n=0;o>n;n+=1)s[n]=str(n,l)||\"null\";r=0===s.length?\"[]\":gap?\"[\\n\"+gap+s.join(\",\\n\"+gap)+\"\\n\"+a+\"]\":\"[\"+s.join(\",\")+\"]\";gap=a;return r}if(rep&&\"object\"==typeof rep){o=rep.length;for(n=0;o>n;n+=1)if(\"string\"==typeof rep[n]){i=rep[n];r=str(i,l);r&&s.push(quote(i)+(gap?\": \":\":\")+r)}}else for(i in l)if(Object.prototype.hasOwnProperty.call(l,i)){r=str(i,l);r&&s.push(quote(i)+(gap?\": \":\":\")+r)}r=0===s.length?\"{}\":gap?\"{\\n\"+gap+s.join(\",\\n\"+gap)+\"\\n\"+a+\"}\":\"{\"+s.join(\",\")+\"}\";gap=a;return r}}if(\"function\"!=typeof Date.prototype.toJSON){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+\"-\"+f(this.getUTCMonth()+1)+\"-\"+f(this.getUTCDate())+\"T\"+f(this.getUTCHours())+\":\"+f(this.getUTCMinutes())+\":\"+f(this.getUTCSeconds())+\"Z\":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var cx=/[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,escapable=/[\\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,gap,indent,meta={\"\\b\":\"\\\\b\",\"\t\":\"\\\\t\",\"\\n\":\"\\\\n\",\"\\f\":\"\\\\f\",\"\\r\":\"\\\\r\",'\"':'\\\\\"',\"\\\\\":\"\\\\\\\\\"},rep;\"function\"!=typeof window.JSON.stringify&&(window.JSON.stringify=function(e,t,n){var i;gap=\"\";indent=\"\";if(\"number\"==typeof n)for(i=0;n>i;i+=1)indent+=\" \";else\"string\"==typeof n&&(indent=n);rep=t;if(t&&\"function\"!=typeof t&&(\"object\"!=typeof t||\"number\"!=typeof t.length))throw new Error(\"window.JSON.stringify\");return str(\"\",{\"\":e})});\"function\"!=typeof window.JSON.parse&&(window.JSON.parse=function(text,reviver){function walk(e,t){var n,i,r=e[t];if(r&&\"object\"==typeof r)for(n in r)if(Object.prototype.hasOwnProperty.call(r,n)){i=walk(r,n);void 0!==i?r[n]=i:delete r[n]}return reviver.call(e,t,r)}var j;text=String(text);cx.lastIndex=0;cx.test(text)&&(text=text.replace(cx,function(e){return\"\\\\u\"+(\"0000\"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\\],:{}\\s]*$/.test(text.replace(/\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g,\"@\").replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g,\"]\").replace(/(?:^|:|,)(?:\\s*\\[)+/g,\"\"))){j=eval(\"(\"+text+\")\");return\"function\"==typeof reviver?walk({\"\":j},\"\"):j}throw new SyntaxError(\"window.JSON.parse\")})}()}var _v=\"2.16.0\",_name=\"lp_json_support\";return{v:_v,name:_name,init:init}}();window.lpTag=lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.taglets.lp_sdes=lpTag.taglets.lp_sdes||function(){function e(){var e=lpTag.sdes;lpTag.sdes=lpTag.taglets.lp_sdes;if(\"undefined\"!=typeof e&&e.length)for(var n=0;n<e.length;n++)t(e[n])}function t(e){if(\"undefined\"!=typeof e){\"undefined\"==typeof e.length&&(e=[e]);for(var t=0;t<e.length;t++)if(\"object\"==typeof e[t]&&e[t].type){var n=i(e[t].type);if(\"undefined\"!=typeof n){n.push(e[t]);u[e[t].type]=n}else u[e[t].type]=[e[t]];a(\"Added sde type: \"+e[t].type);lpTag.events.trigger(l,\"VAR_ADDED\",e[t])}else s(\"sde: \"+JSON.stringify(e[t])+\" is not an Object\");lpTag.taglets.lp_monitoringSDK.sdes.push(e)}else s(\"Called push with no sde\")}function n(e,n){\"undefined\"!=typeof e&&t(e);o(\"called send with sdes: \"+JSON.stringify(e),\"DEBUG\");return lpTag.taglets.lp_monitoringSDK.send(n)}function i(e){return e?u[e]:u}function r(){u={};a(\"sdes store was reset\")}function o(e,t){window.lpTag&&lpTag.log&&lpTag.log(e,t,l)}function s(e){o(e,\"ERROR\")}function a(e){o(e,\"INFO\")}var l=\"lp_sdes\",c=\"2.16.0\",u={};return{v:c,name:l,init:e,get:i,push:t,send:n,reset:r,inspect:function(){return{store:i()}}}}();window.lpTag=window.lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.taglets.lpActivityMonitor=lpTag.taglets.lpActivityMonitor||function(){function init(e){lpTag.sdes=lpTag.sdes||[];_handleCfg(e);_defer(_register)}function start(){_debug(\"Starting activity tracking\");active=!0;intervalId=setTimeout(_pushEvent,conf.timeout)}function stop(){_debug(\"Called Stop\");if(intervalId){clearTimeout(intervalId);active=!1;_info(\"Stopped activity tracking\")}}function push(e){_debug(\"Called push with type=\"+e);e&&\"number\"==typeof e?lpTag.sdes.push({type:conf.sdeType,input:e}):_log(\"Did not push sde since type is not a number type=\"+e,\"ERROR\")}function reset(){lastActivityTime=0;lastInputType=inputType.UNDEFINED}function isActive(){return active}function _log(e,t){window.lpTag&&lpTag.log&&lpTag.log(e,t,name)}function _debug(e){_log(e,\"DEBUG\")}function _info(e){_log(e,\"INFO\")}function _clone(e){var t={};if(e.constructor===Object)for(var n in e)try{e.hasOwnProperty(n)&&\"function\"!=typeof e[n]&&(t[n]=e[n])}catch(i){_log(\"Error cloning configuration object: \"+JSON.stringify(i.message),\"ERROR\")}else e.constructor===Array?t=e.slice(0)||[]:\"function\"!=typeof e&&(t=e);return t}function _defer(e){return setTimeout(e,0)}function _handleCfg(cfg){if(cfg)for(var i=0;i<cfg.length;i++){var val=cfg[i].value;\"string\"==typeof val&&\"\"!==val&&(\"[\"===val.charAt(0)||\"{\"===val.charAt(0))&&(val=\"undefined\"!=typeof JSON&&JSON.parse?JSON.parse(val):eval(\"(\"+val+\")\"));conf[cfg[i].id]=val}else _info(\"No cfg were given on init\")}function _bindEvent(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent(\"on\"+t,n)}function _handleEvent(e){handlerTimeoutId&&clearTimeout(handlerTimeoutId);var t=e.type;handlerTimeoutId=_defer(function(){if(eventTypes[t]){lastInputType=eventTypes[t].input;lastActivityTime=(new Date).getTime()}})}function _register(){for(var e in eventTypes)eventTypes.hasOwnProperty(e)&&_bindEvent(eventTypes[e].elem,e,_handleEvent)}function _pushEvent(){var e=(new Date).getTime()-lastActivityTime;if(0!==lastActivityTime&&e<=conf.timeout){lpTag.events.trigger(name,\"ACTIVITY_MONITORED\",{inputType:lastInputType,time:lastActivityTime});push(lastInputType)}intervalId&&clearTimeout(intervalId);intervalId=setTimeout(_pushEvent,conf.timeout)}var v=\"2.16.0\",name=\"lpActivityMonitor\",intervalId,handlerTimeoutId,active=!1,inputType={UNDEFINED:0,MOUSE:1,KEYBOARD:2,TOUCH:3,FOCUS:4},lastActivityTime=0,lastInputType=inputType.UNDEFINED,conf={timeout:6e4,sdeType:\"tabActive\"},eventTypes={click:{elem:document,input:inputType.MOUSE},mousemove:{elem:document,input:inputType.MOUSE},wheel:{elem:document,input:inputType.MOUSE},scroll:{elem:window,input:inputType.MOUSE},keydown:{elem:document,input:inputType.KEYBOARD},touchmove:{elem:document,input:inputType.TOUCH},focus:{elem:window,input:inputType.FOCUS}};return{v:v,name:name,init:init,start:start,stop:stop,push:push,reset:reset,isActive:isActive,inputType:inputType,inspect:function(){return{conf:_clone(conf),lastActivityTime:lastActivityTime,lastInputType:lastInputType,intervalId:intervalId}}}}();window.lpTag=lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.taglets.lp_storage=lpTag.taglets.lp_storage||function(){function e(){}function t(){return\"undefined\"!=typeof Storage}function n(e,n,i){if(t())if(\"string\"!=typeof n||\"undefined\"==typeof i)d(\"Called push with no params, key: \"+n+\", value: \"+i);else{try{window[e].setItem(n,i)}catch(r){d(\"Failed to push key=\"+n+\" value=\"+i+\" to store=\"+e+\", e=\"+JSON.stringify(r.message));return!1}if(null!==window[e].getItem(n)){lpTag.events.trigger(p,\"VAR_ADDED\",{key:n,value:i});return!0}}else d(\"Called push on an unsupported browser\");return!1}function i(e,t){return n(\"localStorage\",e,t)}function r(e,t){return n(\"sessionStorage\",e,t)}function o(e,n){if(t()){if(\"string\"!=typeof n)d(\"Called delete with no key\");else if(null!==window[e].getItem(n)){window[e].removeItem(n);g(\"Deleted key: \"+n+\" from store: \"+e,\"INFO\")}}else d(\"Called delete on an unsupported browser\")}function s(e){return o(\"localStorage\",e)}function a(e){return o(\"sessionStorage\",e)}function l(e,n){var i;t()?i=n?window[e].getItem(n):window[e]:d(\"Called get on an unsupported browser\");return i}function c(e){return l(\"localStorage\",e)}function u(e){return l(\"sessionStorage\",e)}function g(e,t){window.lpTag&&lpTag.log&&lpTag.log(e,t,p)}function d(e){g(e,\"ERROR\")}var p=\"lp_storage\",f=\"2.16.0\";return{v:f,name:p,init:e,isEnabled:t,persist:{push:i,get:c,del:s},session:{push:r,get:u,del:a},inspect:function(){return{local:localStorage,session:sessionStorage}}}}();window.lpTag=lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.taglets.lp_monitoringSDK=lpTag.taglets.lp_monitoringSDK||function(){function init(cfg){reset();if(cfg)for(var i=0;i<cfg.length;i++){var val=cfg[i].value;\"string\"==typeof val&&\"\"!==val&&(\"[\"===val.charAt(0)||\"{\"===val.charAt(0))&&(val=\"undefined\"!=typeof JSON&&JSON.parse?JSON.parse(val):eval(\"(\"+val+\")\"));_conf[cfg[i].id]=val}else _info(\"No cfg were given on init\");var obj={frames:{url:_conf.protocol+_conf.baseUrl+_conf.frameName}};lpTag.taglets.postmessage.configure(obj)}function startPage(e,t){_info(\"Called startPage onSuccess: \"+e);var n={type:TYPE.startPage,onSuccess:e,onError:t,isSync:!0},i=_getRequestObject(n);if(_startPageSent){n.rid=i.rid;n.result={error:500,message:\"pageLoaded request was already sent once\"};n.status=STATUS.err;_monitoringCb(n)}else _sendInitializingRequest(i);_startPageSent=!0}function pageLoaded(e,t){_debug(\"Called pageLoaded onSucess is: \"+e);var n={type:TYPE.pageLoaded,onSuccess:e,onError:t,isSync:!0},i=_getRequestObject(n);if(_startPageSent&&!_pageLoadedSent)_sendSyncRequest(i);else{n.rid=i.rid;n.result={error:500,message:\"pageLoaded request was already sent once\"};n.status=STATUS.err;_monitoringCb(n)}_pageLoadedSent=!0}function inPage(e,t){_debug(\"Called inPage onSucess is: \"+e);var n={type:TYPE.inPage,onSuccess:e,onError:t,isSync:!0},i=_getRequestObject(n);if(_startPageSent&&_pageLoadedSent)_sendSyncRequest(i);else{n.rid=i.rid;n.result={error:500,message:\"Cannot issue inPage request when startPage and pageLoaded were not sent\"};n.status=STATUS.err;_monitoringCb(n)}}function send(e){_debug(\"Called send, onSuccess: \"+e);var t={type:TYPE.updateContext,onSuccess:e,onError:void 0,isSync:!0};if(_sdes.length>0){var n=_getRequestObject(t);_sendSyncRequest(n);return!0}return!1}function sendAsync(e,t){var n=[];if(\"undefined\"!=typeof t&&t instanceof Array){for(var i=0;i<t.length;i++)\"object\"==typeof t[i]&&t[i].type?n.push(t[i]):_error(\"sendAsync: SDE is not an Object\");var r={type:TYPE.updateContext,onSuccess:e,onError:void 0,data:{sdes:n},isSync:!1},o=_getRequestObject(r);_sendAsyncRequest(o);return!0}return!1}function push(e){_debug(\"Called push with sdes: \"+JSON.stringify(e));if(\"undefined\"!=typeof e&&e instanceof Array)for(var t=0;t<e.length;t++)\"object\"==typeof e[t]&&e[t].type?_sdes.push(e[t]):_error(\"push: SDE when calling is not an Object\")}function getSidPrefix(){var e=getSid();return e?e.substring(0,e.indexOf(\".\")):void 0}function getSid(){return _sid||_getCookie(\"LPSID-\"+_conf.accountId)}function getVid(){return _vid||_getCookie(\"LPVID\")}function isTPCEnabled(){return _conf.thirdPartyEnabled}function appendCtx(e,t,n){-1===e.indexOf(\"?\")?e+=\"?\":\"&\"!==e[e.length-1]&&(e+=\"&\");t||(t=\"SVID\");n||(n=\"SSID\");getSid()&&(e+=encodeURIComponent(n)+\"=\"+encodeURIComponent(getSid()));getVid()&&(e+=\"&\"+encodeURIComponent(t)+\"=\"+encodeURIComponent(getVid()));return e}function stringify(e){var t;if(\"function\"==typeof Array.prototype.toJSON){var n=Array.prototype.toJSON;delete Array.prototype.toJSON;try{t=JSON.stringify(e)}catch(i){Array.prototype.toJSON=n;throw i}Array.prototype.toJSON=n}else t=JSON.stringify(e);return t}function reset(){_debug(\"Called reset\");_conf={thirdPartyEnabled:void 0,protocol:0===document.location.toString().indexOf(\"https:\")?\"https://\":\"http://\",baseUrl:lpTag.getDomain(\"smt\"),apiPath:\"/api/js\",rdrPath:\"/rdr\",frameName:\"/postmessage/postmessage.min.html\",accountId:lpTag.site||{},rmSession:!1,timeout:5e4,debug:!1};_sdes=[];_pendingSyncRequests=[];_inProgSyncReq=void 0;_cbMap={};_startPageSent=!1;_initPageFinished=!1;_debugSent=!1;_asyncInProgress=!1;_idCnt=0;_vid=void 0;_sid=void 0;clearTimeout(retryTimeoutId);retryTimeoutId=void 0;retry={count:0,max:6,timeout:10}}function inspect(){return{conf:_conf,retry:retry}}function _log(e,t){window.lpTag&&lpTag.log&&lpTag.log(e,t,\"lp_monitoringSDK\")}function _error(e){_log(e,\"ERROR\")}function _debug(e){_log(e,\"DEBUG\")}function _info(e){_log(e,\"INFO\")}function _getRID(){_idCnt++;return _idCnt}function _genRandId(){return Math.abs(Math.round(9999999999*Math.random()))}function _getTabId(){var e=lpTag.taglets.lp_storage.session.get(\"lpTabId\");if(!e){e=_genRandId();lpTag.taglets.lp_storage.session.push(\"lpTabId\",e)}return e}function _monitoringCb(e){var t,n=_cbMap[e.rid],i=e.result;i&&i.body&&(i=i.body);if(n){var r=_handleRetry(i,n.req);if(!r){retry.count=0;_cbMap[e.rid]=null;delete _cbMap[e.rid];_debug(\"Called _monitoringCb with type= \"+e.type+\" ,result=\"+JSON.stringify(i));t=_isRespOk(i,e.status);_handleConf(i);_setFPC();_setLastVisit();lpTag.events.trigger(name,\"DEBUG_STATUS\",{debug:_conf.debug});lpTag.events.trigger(name,\"REQUEST_COMPLETE\",{type:e.type,status:e.status});_handleCallbacks({success:t,result:i,cbs:n,response:e})}}else _error(\"Failed on _monitoringCb, request id does not exist in map, rid=\"+e.rid)}function _handleCallbacks(e){if(e.success){_handleMsgs(e.result);if(e.cbs.cOnSuccess)try{e.cbs.cOnSuccess(e.result)}catch(t){_error(\"Failed calling client onSuccess, _monitoringCb e=\"+JSON.stringify(t.message))}}else if(e.cbs.cOnError)try{e.cbs.cOnError(e.result)}catch(t){_error(\"Failed calling client onError, _monitoringCb e=\"+JSON.stringify(t.message))}e.response.type===TYPE.startPage?_initPageCb(e.success):e.response.isSync?_genericCb():_asyncRequestCb()}function _handleRetry(e,t){var n=e.sdkConf&&e.sdkConf.retry;if(n){retryTimeoutId&&clearTimeout(retryTimeoutId);isNaN(n.max)||(retry.max=parseInt(n.max,10));isNaN(n.timeout)||(retry.timeout=parseInt(n.timeout,10));if(retry.count<retry.max){_info(\"retrying count=\"+retry.count+\" max=\"+retry.max);retry.count++;retryTimeoutId=setTimeout(function(){t.data.rc=retry.count;lpTag.taglets.lpAjax.issueCall(t)},1e3*retry.timeout);return!0}_error(\"exceeded max retries: \"+retry.max+\", stopping\")}}function _handleMsgs(e){var t={};if(e.messagesToVisitor)for(var n=0;n<e.messagesToVisitor.length;n++){t=e.messagesToVisitor[n];try{lpTag.events.trigger(t.destination,t.subject,t.content)}catch(i){_error(\"Failed on _handleMsgs when triggering dest=\"+t.destination+\" ,subject=\"+t.subject+\" ,content= \"+t.content+\" ,e=\"+JSON.stringify(i.message))}}}function _getCookie(e){var t=document.cookie,n=t.indexOf(e+\"=\");if(\"undefined\"==typeof e||-1===n)return null;var i=n+e.length+1;if(!n&&e!==t.substring(0,e.length))return null;var r=t.indexOf(\";\",i);-1===r&&(r=t.length);return unescape(t.substring(i,r))}function _setCookie(e,t,n,i,r){n&&(n=1e3*n*60*60*24);var o=new Date((new Date).getTime()+n);document.cookie=e+\"=\"+escape(t)+(n?\";expires=\"+o.toGMTString():\"\")+(i?\";path=\"+i:\"\")+(r?\";domain=\"+r:\"\")}function _deleteCookie(e,t,n){_getCookie(e)&&(document.cookie=e+\"=\"+(t?\";path=\"+t:\"\")+(n?\";domain=\"+n:\"\")+\";expires=Thu, 01-Jan-1970 00:00:01 GMT\")}function _setFPC(){if(_conf.rmVisitor){delete _conf.lpVisitorId;_vid=null;_deleteCookie(\"LPVID\",\"/\",_conf.domain)}var e=_conf.lpVisitorId;if(_conf.rmSession){delete _conf.lpSessionId;_sid=null;_deleteCookie(\"LPSID-\"+_conf.accountId,\"/\",_conf.domain)}var t=_conf.lpSessionId;if(e){_vid=e;_setCookie(\"LPVID\",e,730,\"/\",_conf.domain)}if(t){_sid=t;_setCookie(\"LPSID-\"+_conf.accountId,t,void 0,\"/\",_conf.domain)}}function _setLastVisit(){var e=_conf.lpLastVisit;e&&lpTag.taglets.lp_storage.persist.push(\"lpLastVisit-\"+_conf.accountId,e)}function _handleConf(e){delete _conf.lpVisitorId;delete _conf.lpSessionId;delete _conf.lpLastVisit;delete _conf.rmSession;delete _conf.rmVisitor;delete _conf.lpLastVisit;if(e.sdkConf){for(var t in e.sdkConf)_conf[t]=e.sdkConf[t];delete e.sdkConf}}function _isRespOk(e,t){return t===STATUS.ok&&!e.error}function _addIdToReq(e){var t=_vid||_getCookie(\"LPVID\");t&&(e.data.vid=t);var n=_sid||_getCookie(\"LPSID-\"+_conf.accountId);n&&(e.url=_addOrUpdateParamInURL(e.url,\"sid\",n));return e}function _addLastVisitToReq(e){var t;if(e.data.t===TYPE.startPage){t=lpTag.taglets.lp_storage.persist.get(\"lpLastVisit-\"+_conf.accountId);t&&(e.data.rvt=t)}}function _addOrUpdateParamInURL(e,t,n){if(e.indexOf(t)>-1){var i=new RegExp(\"([?&])\"+t+\"=.*?(&|$)\",\"i\");return e.replace(i,\"$1\"+encodeURIComponent(t)+\"=\"+encodeURIComponent(n)+\"$2\")}var r=encodeURIComponent(t)+\"=\"+encodeURIComponent(n);e+=e.indexOf(\"?\")===e.length-1?r:e.indexOf(\"?\")>-1&&e.indexOf(\"?\")<e.length?\"&\"+r:\"?\"+r;return e}function _prepareRequest(e){_debug(\"Called _prepareRequest with params: \"+JSON.stringify(e));var t,n;if(e.data)t=e.data.sdes;else{t=_sdes;_sdes=[]}n={rid:e.rid,data:{t:e.type,ts:(new Date).getTime(),pid:_pageID,tid:_tabId},method:\"POST\",encoding:lpTag.charset||\"UTF-8\",transportOrder:[\"jsonp\",\"postmessage\"],success:function(t){e.result=t;e.status=STATUS.ok;_monitoringCb(e)},error:function(t){e.result=t;e.status=STATUS.err;_monitoringCb(e)},url:_conf.protocol+_conf.baseUrl+_conf.apiPath+\"/\"+_conf.accountId+\"?\"};_addIdToReq(n);_addLastVisitToReq(n);if(e.type===TYPE.startPage){n.timeout=_conf.timeout;var i=_collector.title();i&&(n.data.pt=i);var r=_collector.url();r&&(n.data.u=r);var o=_collector.referrer();o&&(n.data.r=o);var s=_collector.section();s&&(n.data.sec=s);lpTag.device&&lpTag.device.family&&(n.data.df=lpTag.device.family());lpTag.device&&lpTag.device.os&&(n.data.os=lpTag.device.os());var a=_collector.emtVisitorId();a&&(n.data.evid=a)}t&&t.length>0&&(n.data.sdes=t);var l=_collector.debug();l&&(n.data.dbg=l);return n}function _sendSyncRequest(e){_pendingSyncRequests.push(e);_processPendingSyncRequests()}function _sendAsyncRequest(e){_info(\"Called _sendAsyncRequest initiating a new async req: \"+JSON.stringify(e));if(_initPageFinished&&!_asyncInProgress){_asyncInProgress=!0;try{lpTag.taglets.lpAjax.issueCall(e)}catch(t){_error(\"Failed on lpAjax.issueCall in _processPendingSyncRequests: e=\"+JSON.stringify(t.message));_callClientCbOnError(e,{error:{code:\"500\",message:\"error while issue request: \"+JSON.stringify(t)}})}}else _callClientCbOnError(e,{error:{code:\"500\",message:\"error while issue request: initialization not completed or onther async running\"}})}function _callClientCbOnError(e,t){if(e.error)try{e.error(t)}catch(n){_error(\"Failed calling client onError _callClientCbOnError e=\"+n)}}function _processPendingSyncRequests(){if(!_inProgSyncReq&&_pendingSyncRequests.length>0&&_initPageFinished){_debug(\"Called _processPendingSyncRequests, initiating a new sync request: \"+_pendingSyncRequests.length+\" inProgress: \"+JSON.stringify(_inProgSyncReq));var e=_pendingSyncRequests.shift();e=_addIdToReq(e);_inProgSyncReq=e;try{lpTag.taglets.lpAjax.issueCall(e)}catch(t){_error(\"Failed on lpAjax.issueCall in _processPendingSyncRequests. e: \"+JSON.stringify(t.message));_callClientCbOnError(e,{error:{code:\"500\",message:\"error while issue request: \"+JSON.stringify(t.message)}})}}else _info(\"Called _processPendingSyncRequests no sync requests to initiate, pending: \"+_pendingSyncRequests.length+\" inProgress: \"+JSON.stringify(_inProgSyncReq))}function _syncRequestFinished(){_debug(\"Called _syncRequestFinished\");_inProgSyncReq=void 0}function _genericCb(){_syncRequestCb()}function _initPageCb(e){_debug(\"Called _initPageCb isSuccess: \"+e);e&&(_initPageFinished=!0);_syncRequestCb()}function _syncRequestCb(){_syncRequestFinished();_processPendingSyncRequests()}function _asyncRequestCb(){_debug(\"Called _asyncRequestCb\");_asyncInProgress=!1}function _sendInitializingRequest(e){_inProgSyncReq=e;try{lpTag.taglets.lpAjax.issueCall(e)}catch(t){_error(\"Failed on lpAjax.issueCall in _sendInitializingRequest. requestId: \"+e.rid+\", e=\"+JSON.stringify(t.message))}}function _getRequestObject(e){e.rid=_getRID();var t=_prepareRequest(e);_cbMap[e.rid]={req:t,cOnSuccess:e.onSuccess,cOnError:e.onError};return t}var v=\"2.16.0\",name=\"lp_monitoringSDK\",TYPE={startPage:\"sp\",pageLoaded:\"pl\",inPage:\"ip\",updateContext:\"uc\"},STATUS={err:\"ERROR\",ok:\"OK\"},_sdes,_conf,_pendingSyncRequests,_inProgSyncReq,_cbMap={},_pageID=_genRandId(),_tabId=_getTabId(),_startPageSent,_pageLoadedSent,_initPageFinished,_debugSent,_asyncInProgress,_idCnt,_vid,_sid,retryTimeoutId,retry,_collector={referrer:function(){var e;document.referrer&&document.referrer.length>0&&(e=document.referrer);return e},title:function(){var e;document.title&&document.title.length>0&&(e=document.title);return e},url:function(){var e;window.location.href&&window.location.href.length>0&&(e=window.location.href);return e},debug:function(){var e=lpTag.taglets.lp_storage.persist.get(\"lpDebug-\"+_conf.accountId);if(e&&!_debugSent){_debugSent=!0;return!0}return!1},section:function(){var e=lpTag.section;\"string\"==typeof e&&e.length&&(e=[e]);return e},emtVisitorId:function(){return _getCookie(_conf.accountId+\"-VID\")}};return{v:v,name:name,inspect:inspect,init:init,sdes:{push:push},appendCtx:appendCtx,isTPCEnabled:isTPCEnabled,getVid:getVid,getSid:getSid,getSidPrefix:getSidPrefix,send:send,inPage:inPage,pageLoaded:pageLoaded,startPage:startPage,reset:reset,stringify:stringify}}();window.lpTag=lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.taglets.lp_SMT=lpTag.taglets.lp_SMT||function(){function init(cfg){if(cfg)for(var i=0;i<cfg.length;i++){var val=cfg[i].value;\"string\"==typeof val&&\"\"!==val&&(\"[\"===val.charAt(0)||\"{\"===val.charAt(0))&&(val=\"undefined\"!=typeof JSON&&JSON.parse?JSON.parse(val):eval(\"(\"+val+\")\"));_conf[cfg[i].id]=val}else _info(\"No cfg were given on init\")}function start(){_conf.active=!0;if(lpTag.taglets.lp_monitoringSDK.inspect().conf.baseUrl===lpTag.getDomain(\"ALL\")){_conf.active=!1;_error(\"Monitoring set to inactive! smt domain was not found\")}lpTag.events.trigger(_name,\"MONITORING_STATE\",{active:_conf.active});_issueReq(_TYPES.sp);lpTag.isDom?_issueReq(_TYPES.pl):lpTag.events.bind(\"LPT\",\"DOM_READY\",function(){_issueReq(_TYPES.pl)})}function stop(){_conf.active=!1}function isActive(){return _conf.active}function _log(e,t){window.lpTag&&lpTag.log&&lpTag.log(e,t,_name)}function _error(e){_log(e,\"ERROR\")}function _debug(e){_log(e,\"DEBUG\")}function _info(e){_log(e,\"INFO\")}function _onSuccess(e){_info(\"success call made by smt with the following result: \"+e)}function _onError(e){_error(\"error returned to smt callback onError: \"+e)}function _isRespOk(e){return e.status===_STATUS.ok&&!e.error}function _defaultCb(e){_handleConf(e);_triggerEvent();if(_conf.keepAliveFreq&&_conf.active&&(e.reqType===_TYPES.pl||e.reqType===_TYPES.ip)){_nexReq=setTimeout(function(){_issueReq(_TYPES.ip)},1e3*_conf.keepAliveFreq);_debug(\"Next request to be issued in \"+_conf.keepAliveFreq+\"sec\")}if(_isRespOk(e))try{_onSuccess(e)}catch(t){_error(\"Client onSuccess callback returned an error: \"+JSON.stringify(t.message))}else try{_onError(e)}catch(t){_error(\"Client onError callback returned an error: \"+JSON.stringify(t.message))}}function _triggerEvent(){_conf.active||lpTag.events.trigger(_name,\"MONITORING_STATE\",{active:_conf.active})}function _handleConf(e){if(e.smtConf){for(var t in e.smtConf)_conf[t]=e.smtConf[t];delete e.smtConf}}function _issueReq(e){if(_conf.active){lpTag.taglets.lp_monitoringSDK[e](function(t){t.status=_STATUS.ok;t.reqType=e;_defaultCb(t)},function(t){t.status=_STATUS.err;t.reqType=e;_defaultCb(t)});_debug(\"Sending\"+e+\"request\")}else _info(\"Monitoring is set to inactive, not sending any requests\")}var _v=\"2.16.0\",_name=\"lp_SMT\",_TYPES={sp:\"startPage\",pl:\"pageLoaded\",ip:\"inPage\"},_STATUS={err:\"ERROR\",ok:\"OK\"},_conf={keepAliveFreq:10,active:!0},_nexReq=-1;return{v:_v,name:_name,inspect:function(){return _conf},init:init,start:start,stop:stop,isActive:isActive}}();window.lpTag=lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.taglets.SMT=lpTag.taglets.SMT||function(){function e(e){for(var n=0;n<r.taglets.length;n++){var i=lpTag.taglets[r.taglets[n]];try{\"lp_SMT\"===i.name||\"lp_monitoringSDK\"===i.name?i.init(e):i.init();t(\"Called init on taglet: \"+i.name,\"DEBUG\")}catch(o){t(\"Error init taglet:\"+i.name+\"  e=\"+JSON.stringify(o.message),\"ERROR\")}}for(var s=0;s<r.taglets.length;s++){var a=lpTag.taglets[r.taglets[s]];try{\"function\"==typeof a.start&&a.start();t(\"Called start on taglet: \"+a.name,\"DEBUG\")}catch(o){t(\"Error start taglet: \"+a.name+\"e= \"+JSON.stringify(o.message),\"ERROR\")}}}function t(e,t){window.lpTag&&lpTag.log&&lpTag.log(e,t,n)}var n=\"SMT\",i=\"2.16.0\",r={taglets:[\"lp_json_support\",\"lp_monitoringSDK\",\"lp_sdes\",\"lp_SMT\",\"lpActivityMonitor\"]};return{v:i,name:n,init:e}}();","name":"SMT"}]});